# 48 Embedded（複合モデル）階層深度ガイドライン

mirel Studio の複合モデル（Embedded）は柔軟性が高い一方、  
階層が深くなりすぎると管理コストが急増するため、  
推奨ガイドラインを定義する。

---

# 1. 階層深度の上限

```
推奨：最大 3 階層
制限：最大 5 階層（安全装置）
```

理由：
- 型安全サジェストが煩雑になる  
- Flow の条件式が読みづらくなる  
- フォームの自動レイアウトが破綻  

---

# 2. 推奨モデル構成

### 良い例（3 階層）
```
Order
└── Customer
    └── Address
```

### 悪い例（6 階層以上）
```
Project
└── Phase
    └── Task
        └── Detail
            └── Attribute
                └── Meta
```

---

# 3. 階層深度と UI の関係

- 3 階層 → 通常フォームで十分可読  
- 4 階層 → タブ化・折りたたみを推奨  
- 5 階層 → 拡張フォームや複数画面分割を推奨  

---

# 4. Studio の自動警告

階層 4 を超えた時点で：

```
[警告] モデルの階層深度が 4 を超えています。
UI の可読性が低下する可能性があります。
```

---

# 5. Flow 条件式への影響

深い階層は以下のように肥大化する：

```
project.phase.task.detail.attribute.name
```

→ 可読性が低い  
→ 設計レビューで問題になる

---

# 6. 設計意図

- モデル駆動設計の健全性保持  
- フォーム自動生成の品質維持  
- Flow 条件式の複雑化を防ぐ  
