# SaaSåŒ–å¯¾å¿œ å®Ÿè£…å®Œäº†å ±å‘Šï¼ˆâ‘ ã€œâ‘¤å®Œäº†ï¼‰

**å®Ÿè£…æ—¥**: 2025å¹´11æœˆ20æ—¥  
**Issue**: #39  
**å®Ÿè£…è€…**: GitHub Copilot ğŸ¤–  
**ã‚³ãƒŸãƒƒãƒˆç¯„å›²**: 78a3e9bã€œc609681

---

## ğŸ“Š å®Ÿè£…å®Œäº†ã‚µãƒãƒªãƒ¼

ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã‹ã‚‰ã”ä¾é ¼ã„ãŸã ã„ãŸâ‘ ã€œâ‘¤ã®ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚

### âœ… â‘  èªè¨¼APIã‚’å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã«æƒãˆã‚‹

**ã‚³ãƒŸãƒƒãƒˆ**: 78a3e9b

**å®Ÿè£…å†…å®¹**:
- `AuthenticationServiceImpl` - èªè¨¼ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
  - `login()` - ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ã€JWTç™ºè¡Œã€RefreshTokenä½œæˆ
  - `signup()` - æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒŠãƒ³ãƒˆå‰²ã‚Šå½“ã¦ã€FREEãƒ©ã‚¤ã‚»ãƒ³ã‚¹ä»˜ä¸
  - `refresh()` - RefreshTokenæ¤œè¨¼ã€æ–°ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
  - `logout()` - RefreshTokenå¤±åŠ¹
  - `switchTenant()` - ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿ã€UserTenant.isDefaultæ›´æ–°

**å®Ÿè£…API**:
1. **POST /auth/login**
   - å…¥åŠ›: `{ email, password }`
   - å‡¦ç†: emailã§Useræ¤œç´¢ â†’ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ï¼ˆBCryptï¼‰ â†’ JWTç™ºè¡Œ â†’ RefreshTokenä½œæˆï¼ˆSHA-256ãƒãƒƒã‚·ãƒ¥ä¿å­˜ï¼‰
   - å‡ºåŠ›: `AuthenticationResponse { user, tokens, currentTenant }`

2. **POST /auth/signup**
   - å…¥åŠ›: `{ email, password, displayName, firstName, lastName }`
   - å‡¦ç†: Userä½œæˆ â†’ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒŠãƒ³ãƒˆå‰²ã‚Šå½“ã¦ â†’ UserTenantä½œæˆï¼ˆroleInTenant=MEMBER, isDefault=trueï¼‰ â†’ FREEãƒ©ã‚¤ã‚»ãƒ³ã‚¹ä»˜ä¸
   - å‡ºåŠ›: `AuthenticationResponse`

3. **POST /auth/refresh**
   - å…¥åŠ›: `{ refreshToken }`
   - å‡¦ç†: RefreshTokenæ¤œè¨¼ï¼ˆSHA-256ãƒãƒƒã‚·ãƒ¥ç…§åˆã€æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯ï¼‰ â†’ æ–°ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
   - å‡ºåŠ›: `AuthenticationResponse`

4. **POST /auth/logout**
   - å…¥åŠ›: `{ refreshToken }` (optional)
   - å‡¦ç†: RefreshTokenå¤±åŠ¹ï¼ˆrevokedAtè¨­å®šï¼‰
   - å‡ºåŠ›: 200 OK

**DTOsä½œæˆ**:
- `SignupRequest` - ãƒ¡ãƒ¼ãƒ«ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€è¡¨ç¤ºåç­‰ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
- `RefreshTokenRequest` - ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³
- `SwitchTenantRequest` - ãƒ†ãƒŠãƒ³ãƒˆID
- `LoginRequest` - emailãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´ï¼ˆ@Email, @NotBlankãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

**ãƒ†ã‚¹ãƒˆ**ï¼ˆæ¨å¥¨å®Ÿè£…ï¼‰:
```java
// æ­£å¸¸ç³»
POST /auth/signup â†’ 201 + AuthenticationResponse
POST /auth/login â†’ 200 + AuthenticationResponse
GET /auth/me (with JWT) â†’ 200 + UserContextDto

// ç•°å¸¸ç³»
POST /auth/login (invalid password) â†’ 401
POST /auth/refresh (expired token) â†’ 401
```

---

### âœ… â‘¡ ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿ã®å‡¦ç†ã‚’å®Ÿè£…

**ã‚³ãƒŸãƒƒãƒˆ**: 78a3e9b

**å®Ÿè£…å†…å®¹**:
- `POST /auth/switch-tenant` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `AuthenticationServiceImpl.switchTenant()` ãƒ¡ã‚½ãƒƒãƒ‰

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®userIdã‚’å–å¾—ï¼ˆExecutionContextï¼‰
2. UserTenantãƒ†ãƒ¼ãƒ–ãƒ«ã§æ‰€å±ç¢ºèª
   - æ‰€å±ã—ã¦ã„ãªã„å ´åˆ: 403 Forbiddenï¼ˆ"User is not a member of this tenant"ï¼‰
3. å…¨UserTenant.isDefault = false ã«æ›´æ–°
4. é¸æŠUserTenant.isDefault = true ã«æ›´æ–°
5. User.tenantId ã‚’é¸æŠãƒ†ãƒŠãƒ³ãƒˆIDã«æ›´æ–°
6. UserContextDtoè¿”å´

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹**:
```bash
POST /mapi/auth/switch-tenant
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "tenantId": "tenant-abc123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "user": { "userId": "...", "displayName": "..." },
  "currentTenant": { "tenantId": "tenant-abc123", "tenantName": "..." }
}
```

---

### âœ… â‘¢ Admin API: Users ã ã‘å…ˆã«ä»•ä¸Šã’ã‚‹

**ã‚³ãƒŸãƒƒãƒˆ**: 708c117

**å®Ÿè£…å†…å®¹**:
- `AdminUserController` - ç®¡ç†è€…ç”¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `AdminUserService` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- `@EnableMethodSecurity(prePostEnabled = true)` æœ‰åŠ¹åŒ–

**å®Ÿè£…API**:
1. **GET /admin/users**
   - ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `page`, `size`, `q`, `role`, `active`
   - èªå¯: `@PreAuthorize("hasRole('ADMIN')")`
   - å‡¦ç†: ãƒšãƒ¼ã‚¸ãƒ³ã‚°å–å¾— â†’ å„Userã®UserTenantä¸€è¦§å–å¾— â†’ AdminUserDtoå¤‰æ›
   - å‡ºåŠ›: `UserListResponse { users, page, size, totalElements, totalPages }`

2. **GET /admin/users/{id}**
   - èªå¯: `@PreAuthorize("hasRole('ADMIN')")`
   - å‡¦ç†: Userå–å¾— â†’ æ‰€å±ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§å–å¾—
   - å‡ºåŠ›: `AdminUserDto` (userId, email, displayName, roles, tenants[], lastLoginAtç­‰)

3. **PUT /admin/users/{id}**
   - å…¥åŠ›: `UpdateUserRequest { displayName, firstName, lastName, roles, isActive }`
   - èªå¯: `@PreAuthorize("hasRole('ADMIN')")`
   - å‡¦ç†: Useræ›´æ–°
   - å‡ºåŠ›: `AdminUserDto`

**DTOsä½œæˆ**:
- `AdminUserDto` - æ‰€å±ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±å«ã‚€è©³ç´°DTO
  - `UserTenantInfo[]` - tenantId, tenantName, roleInTenant, isDefault
- `UpdateUserRequest` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- `UserListResponse` - ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹

**ãƒ†ã‚¹ãƒˆ**ï¼ˆæ¨å¥¨å®Ÿè£…ï¼‰:
```java
// æ­£å¸¸ç³»ï¼ˆADMINï¼‰
GET /admin/users?page=0&size=20 â†’ 200 + UserListResponse
GET /admin/users/{id} â†’ 200 + AdminUserDto
PUT /admin/users/{id} â†’ 200 + AdminUserDto

// ç•°å¸¸ç³»ï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
GET /admin/users â†’ 403 Forbidden
```

---

### âœ… â‘£ ãƒ•ãƒ­ãƒ³ãƒˆ: ãƒ­ã‚°ã‚¤ãƒ³ + åŸºç›¤

**ã‚³ãƒŸãƒƒãƒˆ**: c609681

**å®Ÿè£…å†…å®¹**:
- `authStore` - Zustand state management
- `LoginPage` - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼ˆ/loginï¼‰
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š

**authStoreå®Ÿè£…è©³ç´°**:
```typescript
// ã‚¹ãƒˆã‚¢æ§‹é€ 
interface AuthState {
  user: User | null;
  currentTenant: Tenant | null;
  tokens: Tokens | null;
  isAuthenticated: boolean;
  
  // Actions
  login: (email, password) => Promise<void>;
  signup: (data) => Promise<void>;
  logout: () => Promise<void>;
  switchTenant: (tenantId) => Promise<void>;
  setAuth: (user, tenant, tokens) => void;
  clearAuth: () => void;
}

// æ°¸ç¶šåŒ–
persist({
  name: 'auth-storage',
  partialize: (state) => ({ user, currentTenant, tokens, isAuthenticated })
})
```

**LoginPageå®Ÿè£…è©³ç´°**:
- @mirel/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨ï¼ˆCard, Input, Buttonï¼‰
- ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ 
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ"ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸæ™‚ â†’ `/` ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒªãƒ³ã‚¯ï¼ˆ/signupï¼‰

**ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š**:
```typescript
{
  path: '/login',
  element: <LoginPage />,
}
```

**APIå‘¼ã³å‡ºã—ä¾‹**ï¼ˆauthStore.loginï¼‰:
```typescript
const response = await fetch('/mapi/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ email, password }),
});

const data = await response.json();
set({
  user: data.user,
  currentTenant: data.currentTenant,
  tokens: data.tokens,
  isAuthenticated: true,
});
```

---

### âœ… â‘¤ `/saas-status` ã‚’ä¸€æ—¦æ›´æ–°

**ã‚³ãƒŸãƒƒãƒˆ**: c609681

**æ›´æ–°å†…å®¹**:
- Phase 3ã‚’ã€Œå®Œäº†ã€ã«å¤‰æ›´
- æ–°è¦å®Ÿè£…APIä¸€è¦§ã‚’è¿½åŠ 
  - POST /auth/login, /auth/signup, /auth/refresh, /auth/logout, /auth/switch-tenant
  - GET /admin/users, /admin/users/:id
  - PUT /admin/users/:id
- Phase 4ã‚’ã€Œé€²è¡Œä¸­ã€ã«å¤‰æ›´
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…çŠ¶æ³ã‚’è¿½åŠ 
  - âœ“ authStoreï¼ˆZustandï¼‰å®Ÿè£…
  - âœ“ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼ˆ/loginï¼‰
  - â—‹ ãƒ˜ãƒƒãƒ€ãƒ¼å®Ÿè£…ï¼ˆTenantSwitcher, LicenseBadge, UserMenuï¼‰
  - â—‹ ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢ï¼ˆ/signupï¼‰
  - â—‹ ç®¡ç†ç”»é¢ï¼ˆUsers/Tenants/Licensesï¼‰

---

## ğŸ“ ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### Backendï¼ˆ10ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**èªè¨¼é–¢é€£ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰**:
- `AuthenticationServiceImpl.java` - èªè¨¼ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆlogin, signup, refresh, logout, switchTenantï¼‰
- `SignupRequest.java` - ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒªã‚¯ã‚¨ã‚¹ãƒˆDTO
- `RefreshTokenRequest.java` - ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆDTO
- `SwitchTenantRequest.java` - ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿ãƒªã‚¯ã‚¨ã‚¹ãƒˆDTO
- `LoginRequest.java` - emailãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- `AuthenticationController.java` - å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

**Admin APIï¼ˆ5ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰**:
- `AdminUserService.java` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- `AdminUserController.java` - ç®¡ç†è€…ç”¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `AdminUserDto.java` - è©³ç´°DTOï¼ˆæ‰€å±ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±å«ã‚€ï¼‰
- `UpdateUserRequest.java` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- `UserListResponse.java` - ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹

**è¨­å®š**:
- `MiplaApplication.java` - @EnableMethodSecurityè¿½åŠ 

### Frontendï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**èªè¨¼é–¢é€£ï¼ˆ4ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰**:
- `authStore.ts` - Zustand storeï¼ˆlogin, signup, logout, switchTenantï¼‰
- `LoginPage.tsx` - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- `auth/pages/index.ts` - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- `auth/index.ts` - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ãã®ä»–ï¼ˆ2ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰**:
- `router.config.tsx` - /login ãƒ«ãƒ¼ãƒˆè¿½åŠ 
- `SaaSStatusPage.tsx` - å®Ÿè£…çŠ¶æ³æ›´æ–°

---

## ğŸ”§ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ»å‹•ä½œç¢ºèª

### Backend
```bash
./gradlew :backend:compileJava
# BUILD SUCCESSFUL
```

### Frontend
- TypeScriptå‹ãƒã‚§ãƒƒã‚¯: âœ… é€šéï¼ˆauthStore, LoginPageï¼‰
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°: âœ… /login ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ•ãƒ­ãƒ¼

### ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: email, passwordå…¥åŠ›
  â†“
authStore.login()
  â†“
POST /mapi/auth/login
  â†“
AuthenticationController
  â†“
AuthenticationServiceImpl.login()
  â”œâ”€ userRepository.findById(email)
  â”œâ”€ passwordEncoder.matches(password, user.passwordHash)
  â”œâ”€ jwtService.generateToken() â†’ AccessToken
  â”œâ”€ createRefreshToken() â†’ RefreshTokenï¼ˆSHA-256ãƒãƒƒã‚·ãƒ¥ä¿å­˜ï¼‰
  â””â”€ licenseRepository.findEffectiveLicenses()
  â†“
AuthenticationResponse
  â”œâ”€ user: UserDto
  â”œâ”€ tokens: { accessToken, refreshToken, expiresIn: 3600 }
  â””â”€ currentTenant: TenantContextDto
  â†“
authStore: user, currentTenant, tokensä¿å­˜
  â†“
localStorageæ°¸ç¶šåŒ–
  â†“
navigate('/') ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
```

### ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿ãƒ•ãƒ­ãƒ¼
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãƒ†ãƒŠãƒ³ãƒˆé¸æŠ
  â†“
authStore.switchTenant(tenantId)
  â†“
POST /mapi/auth/switch-tenant
Authorization: Bearer <JWT>
X-Tenant-ID: <tenantId>
  â†“
AuthenticationController.switchTenant()
  â†“
ExecutionContext.getCurrentUserId()
  â†“
AuthenticationServiceImpl.switchTenant(userId, tenantId)
  â”œâ”€ userTenantRepository.findByUserIdAndTenantId() â†’ æ‰€å±ç¢ºèª
  â”œâ”€ userTenantRepository.findByUserId() â†’ å…¨isDefault=false
  â”œâ”€ é¸æŠUserTenant.isDefault=true
  â””â”€ user.tenantIdæ›´æ–°
  â†“
UserContextDto
  â”œâ”€ user: UserDto
  â””â”€ currentTenant: TenantContextDtoï¼ˆæ–°ã—ã„ãƒ†ãƒŠãƒ³ãƒˆï¼‰
  â†“
authStore: currentTenantæ›´æ–°
  â†“
UIå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

---

## ğŸ“‹ æ¬¡ã®æ¨å¥¨å®Ÿè£…ã‚¿ã‚¹ã‚¯

### å„ªå…ˆåº¦: é«˜

**ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
- `TenantSwitcher` - æ‰€å±ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§ã€åˆ‡æ›¿UI
  - UserTenantä¸€è¦§å–å¾—API: `GET /auth/me/tenants`
  - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
  - é¸æŠæ™‚: `authStore.switchTenant()`
- `LicenseBadge` - FREE/PRO/MAXè¡¨ç¤º
  - ExecutionContextã‹ã‚‰ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—
  - è‰²åˆ†ã‘è¡¨ç¤ºï¼ˆFREE=ç°è‰²ã€PRO=é’ã€MAX=é‡‘ï¼‰
- `UserMenu` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤º
  - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³: `authStore.logout()` â†’ `/login`

**ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢**:
- `/signup` ãƒ«ãƒ¼ãƒˆ
- `SignupPage` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ãƒ•ã‚©ãƒ¼ãƒ : email, password, displayName, firstName, lastName
- `authStore.signup()` å‘¼ã³å‡ºã—

**ãƒ†ã‚¹ãƒˆ**:
- `AuthenticationServiceImpl` ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
  - loginãƒ†ã‚¹ãƒˆï¼ˆæ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ï¼‰
  - signupãƒ†ã‚¹ãƒˆï¼ˆãƒ¡ãƒ¼ãƒ«é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
  - switchTenantãƒ†ã‚¹ãƒˆï¼ˆæ‰€å±ç¢ºèªï¼‰
- `AdminUserService` ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰
  - ãƒ­ã‚°ã‚¤ãƒ³â†’/auth/meâ†’ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  - ä¸æ­£ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§401
  - ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿

### å„ªå…ˆåº¦: ä¸­

**Admin UI**:
- `/admin/users` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ç”»é¢
- `/admin/users/:id` - ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°ãƒ»ç·¨é›†ç”»é¢
- `/admin/tenants` - ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ç”»é¢
- `/admin/licenses` - ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç®¡ç†ç”»é¢

**Tenants/Licenses Admin API**:
- `AdminTenantController` - ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†API
- `AdminLicenseController` - ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç®¡ç†API

---

## âœ¨ ã¾ã¨ã‚

â‘ ã€œâ‘¤ã®ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¾ã—ãŸï¼

**ä¸»ãªæˆæœ**:
- âœ… å®Œå…¨ãªèªè¨¼APIï¼ˆlogin, signup, refresh, logout, switch-tenantï¼‰
- âœ… Admin Users APIï¼ˆlist, get, updateï¼‰
- âœ… authStoreï¼ˆZustandï¼‰+ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- âœ… SaaS Statusãƒšãƒ¼ã‚¸æ›´æ–°

**ã‚³ãƒ¼ãƒ‰å“è³ª**:
- âœ… Backend ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æˆåŠŸ
- âœ… Frontend å‹ãƒã‚§ãƒƒã‚¯é€šé
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: @PreAuthorize, BCrypt, SHA-256ãƒãƒƒã‚·ãƒ¥
- âœ… ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§: UserTenant.isDefaultæ›´æ–°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒŠãƒ³ãƒˆè‡ªå‹•ä½œæˆ

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**:
- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢å®Ÿè£…
- ãƒ†ã‚¹ãƒˆå……å®Ÿ
- Admin UIå®Ÿè£…

---

**ä½œæˆè€…**: GitHub Copilot ğŸ¤–  
**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ20æ—¥
