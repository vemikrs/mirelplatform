# ãƒ†ãƒŠãƒ³ãƒˆç®¡ç† æ©Ÿèƒ½è¨­è¨ˆæ›¸

## 1. æ¦‚è¦

ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆSaaSåŸºç›¤ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆãƒ†ãƒŠãƒ³ãƒˆï¼‰ç®¡ç†ã«é–¢ã™ã‚‹æ©Ÿèƒ½ç¾¤ã€‚
ãƒ†ãƒŠãƒ³ãƒˆã®ä½œæˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‹›å¾…ã€ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ã€å‰Šé™¤/é€€ä¼šã¾ã§ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†ã™ã‚‹ã€‚

---

## 2. æ©Ÿèƒ½ä¸€è¦§ã¨å®Ÿè£…çŠ¶æ³

| # | æ©Ÿèƒ½å | èª¬æ˜ | ç¾çŠ¶ | å„ªå…ˆåº¦ |
|---|--------|------|------|--------|
| 2.1 | ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | æ–°è¦ãƒ†ãƒŠãƒ³ãƒˆä½œæˆã€ã‚ªãƒ¼ãƒŠãƒ¼è¨­å®š | âŒ æœª | P1 |
| 2.2 | ãƒ†ãƒŠãƒ³ãƒˆæ‹›å¾…æ©Ÿèƒ½ | ãƒ¡ãƒ¼ãƒ«ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‹›å¾… | âš ï¸ Entityæœ‰ | P1 |
| 2.3 | ãƒ†ãƒŠãƒ³ãƒˆé–“ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ | tenantIdã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æ¤œè¨¼ | âŒ æœªæ¤œè¨¼ | P1 |
| 2.4 | ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤/é€€ä¼š | ãƒ†ãƒŠãƒ³ãƒˆã‹ã‚‰ã®é›¢è„±ã€å‰Šé™¤ | âŒ æœª | P2 |
| 2.5 | ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†UI (Admin) | ç®¡ç†è€…å‘ã‘ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ç”»é¢ | âŒ æœª | P2 |
| 2.6 | ãƒ†ãƒŠãƒ³ãƒˆãƒ¡ãƒ³ãƒãƒ¼ç®¡ç† | ãƒ­ãƒ¼ãƒ«å¤‰æ›´ã€ãƒ¡ãƒ³ãƒãƒ¼å‰Šé™¤ | âŒ æœª | P2 |

---

## 3. æ©Ÿèƒ½è©³ç´°è¨­è¨ˆ

### 3.1 ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

#### 3.1.1 ç¾çŠ¶åˆ†æ

```
ã€æ—¢å­˜å®Ÿè£…ã€‘
âœ… Tenant Entity
   - tenantId, tenantName, displayName, description, settings, isActive
âœ… TenantRepository
   - åŸºæœ¬CRUD
âœ… UserTenant Entity
   - userId, tenantId, roleInTenant (OWNER/MANAGER/MEMBER/GUEST)
âœ… Signupæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒŠãƒ³ãƒˆè‡ªå‹•ä½œæˆï¼ˆAuthenticationServiceImplï¼‰

ã€æœªå®Ÿè£…ã€‘
âŒ æ˜ç¤ºçš„ãªãƒ†ãƒŠãƒ³ãƒˆä½œæˆAPI
âŒ ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæ™‚ã®åˆæœŸè¨­å®š
âŒ Frontend UI
```

#### 3.1.2 ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ä½œæˆã€‘                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ä½œæˆ     â”‚â”€â”€â”€â–¶â”‚ ãƒ†ãƒŠãƒ³ãƒˆ â”‚â”€â”€â”€â–¶â”‚ UserTenantâ”‚â”€â”€â”€â–¶â”‚ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹â”‚             â”‚
â”‚  â”‚ ãƒ•ã‚©ãƒ¼ãƒ  â”‚    â”‚ ä½œæˆ     â”‚    â”‚ (OWNER)   â”‚    â”‚ åˆæœŸè¨­å®š â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ã€ç®¡ç†è€…ã‹ã‚‰ã®ä½œæˆã€‘                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Admin    â”‚â”€â”€â”€â–¶â”‚ ãƒ†ãƒŠãƒ³ãƒˆ â”‚â”€â”€â”€â–¶â”‚ ã‚ªãƒ¼ãƒŠãƒ¼æŒ‡å®š or æ‹›å¾…é€ä¿¡ â”‚              â”‚
â”‚  â”‚ ãƒ•ã‚©ãƒ¼ãƒ  â”‚    â”‚ ä½œæˆ     â”‚    â”‚                          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â”‚  ã€ä½œæˆæ™‚ã®åˆæœŸè¨­å®šã€‘                                                        â”‚
â”‚  - tenantId: UUIDè‡ªå‹•ç”Ÿæˆ (tenant-xxxxxxxxxx)                               â”‚
â”‚  - settings: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆJSON                                                  â”‚
â”‚  - ä½œæˆè€…ã¯è‡ªå‹•çš„ã«OWNERãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸                                         â”‚
â”‚  - FREEãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’è‡ªå‹•ä»˜ä¸ (subjectType: TENANT)                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 APIè¨­è¨ˆ

```yaml
# ãƒ†ãƒŠãƒ³ãƒˆä½œæˆï¼ˆèªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
POST /tenants
Headers:
  Authorization: Bearer <token>
Request:
  tenantName: string (required, unique, 3-50 chars)
  displayName: string (optional)
  description: string (optional)
Response:
  201:
    tenantId: "tenant-abc123"
    tenantName: "my-workspace"
    displayName: "My Workspace"
    role: "OWNER"
  400: { error: "ãƒ†ãƒŠãƒ³ãƒˆåãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™" }
  403: { error: "ãƒ†ãƒŠãƒ³ãƒˆä½œæˆä¸Šé™ã«é”ã—ã¾ã—ãŸ" } # 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Šä¸Šé™

# ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±å–å¾—
GET /tenants/{tenantId}
Response:
  200:
    tenantId: "tenant-abc123"
    tenantName: "my-workspace"
    displayName: "My Workspace"
    memberCount: 5
    settings: {...}

# ãƒ†ãƒŠãƒ³ãƒˆæ›´æ–°
PUT /tenants/{tenantId}
Request:
  displayName: string (optional)
  description: string (optional)
  settings: object (optional)
Response:
  200: Tenant
  403: { error: "æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“" } # OWNER/MANAGERã®ã¿
```

#### 3.1.4 å®Ÿè£…ã‚¿ã‚¹ã‚¯

```
â–¡ TenantService.java å®Ÿè£…
  - createTenant(userId, request): ãƒ†ãƒŠãƒ³ãƒˆä½œæˆ
  - getTenant(tenantId): è©³ç´°å–å¾—
  - updateTenant(tenantId, request): æ›´æ–°

â–¡ TenantController.java å®Ÿè£…
  - POST /tenants
  - GET /tenants/{tenantId}
  - PUT /tenants/{tenantId}

â–¡ æ¨©é™ãƒã‚§ãƒƒã‚¯å®Ÿè£…
  - OWNER/MANAGERã®ã¿æ›´æ–°å¯èƒ½
  - ExecutionContexté€£æº

â–¡ Frontend UI
  - ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
  - ãƒ†ãƒŠãƒ³ãƒˆè¨­å®šç”»é¢
```

---

### 3.2 ãƒ†ãƒŠãƒ³ãƒˆæ‹›å¾…æ©Ÿèƒ½

#### 3.2.1 ç¾çŠ¶åˆ†æ

```
ã€æ—¢å­˜å®Ÿè£…ã€‘
âœ… InvitationToken Entity
   - id, token, tenantId, email, invitedBy, expiresAt, isUsed
âœ… InvitationTokenRepository
   - findByToken(), findByTenantId()

ã€æœªå®Ÿè£…ã€‘
âŒ InvitationServiceï¼ˆæ‹›å¾…é€ä¿¡ãƒ»æ‰¿èªãƒ»æ‹’å¦ï¼‰
âŒ æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡
âŒ æ‹›å¾…æ‰¿èªãƒ•ãƒ­ãƒ¼
âŒ Frontend UI
```

#### 3.2.2 ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ†ãƒŠãƒ³ãƒˆæ‹›å¾…ãƒ•ãƒ­ãƒ¼                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ã€æ‹›å¾…é€ä¿¡ã€‘                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ æ‹›å¾…     â”‚â”€â”€â”€â–¶â”‚ Token    â”‚â”€â”€â”€â–¶â”‚ ãƒ¡ãƒ¼ãƒ«   â”‚â”€â”€â”€â–¶â”‚ æ‹›å¾…å®Œäº† â”‚             â”‚
â”‚  â”‚ ãƒ•ã‚©ãƒ¼ãƒ  â”‚    â”‚ ç”Ÿæˆ     â”‚    â”‚ é€ä¿¡     â”‚    â”‚ è¡¨ç¤º     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ã€æ‹›å¾…æ‰¿èªï¼ˆæ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã€‘                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ãƒ¡ãƒ¼ãƒ«   â”‚â”€â”€â”€â–¶â”‚ æ‹›å¾…     â”‚â”€â”€â”€â–¶â”‚ æ‰¿èª     â”‚â”€â”€â”€â–¶â”‚ UserTenantâ”‚             â”‚
â”‚  â”‚ ãƒªãƒ³ã‚¯   â”‚    â”‚ è©³ç´°ç¢ºèª â”‚    â”‚ ãƒœã‚¿ãƒ³   â”‚    â”‚ ä½œæˆ     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ã€æ‹›å¾…æ‰¿èªï¼ˆæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã€‘                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ãƒ¡ãƒ¼ãƒ«   â”‚â”€â”€â”€â–¶â”‚ Signup   â”‚â”€â”€â”€â–¶â”‚ è‡ªå‹•     â”‚â”€â”€â”€â–¶â”‚ UserTenantâ”‚             â”‚
â”‚  â”‚ ãƒªãƒ³ã‚¯   â”‚    â”‚ ç”»é¢     â”‚    â”‚ æ‹›å¾…é©ç”¨ â”‚    â”‚ ä½œæˆ     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ã€åˆ¶ç´„ã€‘                                                                   â”‚
â”‚  - æ‹›å¾…æœ‰åŠ¹æœŸé™: 7æ—¥é–“                                                       â”‚
â”‚  - åŒä¸€ãƒ¡ãƒ¼ãƒ«ã¸ã®é‡è¤‡æ‹›å¾…: ç¦æ­¢ï¼ˆæœ‰åŠ¹ãªæ‹›å¾…ãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰                   â”‚
â”‚  - æ‹›å¾…è€…æ¨©é™: OWNER/MANAGERã®ã¿å¯èƒ½                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.3 APIè¨­è¨ˆ

```yaml
# æ‹›å¾…é€ä¿¡
POST /tenants/{tenantId}/invitations
Headers:
  Authorization: Bearer <token>
Request:
  email: string (required, email format)
  roleInTenant: "MANAGER" | "MEMBER" | "GUEST" (default: MEMBER)
  message: string (optional, æ‹›å¾…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)
Response:
  201:
    invitationId: "inv-123"
    email: "invited@example.com"
    expiresAt: "2025-12-05T10:00:00Z"
  400: { error: "æ—¢ã«æ‹›å¾…æ¸ˆã¿ã§ã™" }
  403: { error: "æ‹›å¾…æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“" }

# æ‹›å¾…ä¸€è¦§å–å¾—
GET /tenants/{tenantId}/invitations
Response:
  200:
    invitations:
      - id: "inv-123"
        email: "invited@example.com"
        roleInTenant: "MEMBER"
        status: "PENDING"
        createdAt: "2025-11-28T10:00:00Z"
        expiresAt: "2025-12-05T10:00:00Z"

# æ‹›å¾…ã‚­ãƒ£ãƒ³ã‚»ãƒ«
DELETE /tenants/{tenantId}/invitations/{invitationId}
Response:
  200: { cancelled: true }

# æ‹›å¾…è©³ç´°å–å¾—ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹ã€èªè¨¼ä¸è¦ï¼‰
GET /invitations/{token}
Response:
  200:
    tenantId: "tenant-abc123"
    tenantName: "My Workspace"
    inviterName: "John Doe"
    roleInTenant: "MEMBER"
    email: "invited@example.com"
    expiresAt: "2025-12-05T10:00:00Z"
  400: { error: "æ‹›å¾…ãŒç„¡åŠ¹ã§ã™" }

# æ‹›å¾…æ‰¿èªï¼ˆèªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
POST /invitations/{token}/accept
Headers:
  Authorization: Bearer <token>
Response:
  200:
    tenantId: "tenant-abc123"
    role: "MEMBER"
    message: "ãƒ†ãƒŠãƒ³ãƒˆã«å‚åŠ ã—ã¾ã—ãŸ"
  400: { error: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸€è‡´ã—ã¾ã›ã‚“" }
```

#### 3.2.4 å®Ÿè£…ã‚¿ã‚¹ã‚¯

```
â–¡ InvitationService.java å®Ÿè£…
  - createInvitation(tenantId, email, roleInTenant)
  - getInvitation(token)
  - acceptInvitation(token, userId)
  - cancelInvitation(invitationId)
  - listInvitations(tenantId)

â–¡ InvitationController.java å®Ÿè£…
  - POST /tenants/{tenantId}/invitations
  - GET /tenants/{tenantId}/invitations
  - DELETE /tenants/{tenantId}/invitations/{id}
  - GET /invitations/{token}
  - POST /invitations/{token}/accept

â–¡ EmailService çµ±åˆ
  - sendInvitationEmail(toEmail, inviterName, tenantName, invitationUrl)
  - FreeMarkerãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

â–¡ Signupé€£æº
  - æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³ä»˜ãSignupã§UserTenantè‡ªå‹•ä½œæˆ

â–¡ Frontend UI
  - æ‹›å¾…ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ¡ãƒ¼ãƒ«å…¥åŠ›ã€ãƒ­ãƒ¼ãƒ«é¸æŠï¼‰
  - æ‹›å¾…ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
  - æ‹›å¾…æ‰¿èªãƒšãƒ¼ã‚¸ (/invitations/{token})
```

---

### 3.3 ãƒ†ãƒŠãƒ³ãƒˆé–“ãƒ‡ãƒ¼ã‚¿åˆ†é›¢

#### 3.3.1 ç¾çŠ¶åˆ†æ

```
ã€ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥ã€‘
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¬ãƒ™ãƒ«: tenantIdãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§åˆ†é›¢
- ã‚¯ã‚¨ãƒªãƒ¬ãƒ™ãƒ«: Repository/Serviceã§æ˜ç¤ºçš„ãªtenantIdãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ExecutionContext: currentTenant.tenantIdã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ç®¡ç†

ã€æ‡¸å¿µäº‹é …ã€‘
âŒ ã‚¯ã‚¨ãƒªæ¼ã‚Œãƒªã‚¹ã‚¯ï¼ˆé–‹ç™ºè€…ãŒæ‰‹å‹•ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å¿˜ã‚Œã‚‹å¯èƒ½æ€§ï¼‰
âŒ Row-Level Security (RLS) æœªå°å…¥
âŒ è‡ªå‹•ãƒ†ã‚¹ãƒˆæœªæ•´å‚™
```

#### 3.3.2 åˆ†é›¢å¼·åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥ã‚ªãƒ—ã‚·ãƒ§ãƒ³                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ã€Option A: Hibernateãƒ•ã‚£ãƒ«ã‚¿ï¼ˆæ¨å¥¨ãƒ»çŸ­æœŸï¼‰ã€‘                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ @FilterDef + @Filter ã§è‡ªå‹•tenantIdãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°                     â”‚  â”‚
â”‚  â”‚ ãƒ¡ãƒªãƒƒãƒˆ: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¸ã®å½±éŸ¿æœ€å°ã€è¿…é€Ÿã«å°å…¥å¯èƒ½                       â”‚  â”‚
â”‚  â”‚ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ: Hibernateã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒå¿…è¦                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ã€Option B: Row-Level Security (PostgreSQL)ã€‘                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DBãƒ¬ãƒ™ãƒ«ã§ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼é©ç”¨                                   â”‚  â”‚
â”‚  â”‚ ãƒ¡ãƒªãƒƒãƒˆ: æœ€ã‚‚å …ç‰¢ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®ãƒŸã‚¹ã‚’é˜²æ­¢                     â”‚  â”‚
â”‚  â”‚ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ: H2é–‹ç™ºç’°å¢ƒã§ã¯ä½¿ç”¨ä¸å¯ã€æœ¬ç•ªPGå°‚ç”¨                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ã€Option C: AOP + æ¤œè¨¼ãƒ†ã‚¹ãƒˆï¼ˆç¾å®Ÿçš„ãƒ»çŸ­æœŸï¼‰ã€‘                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ—¢å­˜ã‚¯ã‚¨ãƒªã®ç¶²ç¾…çš„ãƒ†ã‚¹ãƒˆ + æ–°è¦ã‚¯ã‚¨ãƒªè¿½åŠ æ™‚ã®ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å¼·åŒ–        â”‚  â”‚
â”‚  â”‚ ãƒ¡ãƒªãƒƒãƒˆ: è¿½åŠ å®Ÿè£…ä¸è¦ã€æ„è­˜å‘ä¸Š                                       â”‚  â”‚
â”‚  â”‚ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ: å®Œå…¨ãªé˜²æ­¢ã§ã¯ãªã„                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ã€æ¨å¥¨ã€‘Phase 1: Option Cã€Phase 2: Option Aã€å°†æ¥: Option B               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.3 Hibernateãƒ•ã‚£ãƒ«ã‚¿å®Ÿè£…ä¾‹

```java
// Tenantåˆ†é›¢å¯¾è±¡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹
@MappedSuperclass
@FilterDef(name = "tenantFilter", parameters = @ParamDef(name = "tenantId", type = String.class))
@Filter(name = "tenantFilter", condition = "tenant_id = :tenantId")
public abstract class TenantAwareEntity {
    @Column(name = "tenant_id", nullable = false)
    protected String tenantId;
}

// ExecutionContextFilterã§ãƒ•ã‚£ãƒ«ã‚¿æœ‰åŠ¹åŒ–
@Component
public class TenantFilterAspect {
    @Autowired
    private EntityManager entityManager;
    
    @Autowired
    private ExecutionContext executionContext;
    
    @Before("execution(* jp.vemi.mirel..repository.*Repository.*(..))")
    public void enableTenantFilter() {
        if (executionContext.getCurrentTenantId() != null) {
            Session session = entityManager.unwrap(Session.class);
            session.enableFilter("tenantFilter")
                   .setParameter("tenantId", executionContext.getCurrentTenantId());
        }
    }
}
```

#### 3.3.4 æ¤œè¨¼ãƒ†ã‚¹ãƒˆè¨ˆç”»

```
â–¡ TenantIsolationTest.java ä½œæˆ
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼AãŒTenantAã®ãƒ‡ãƒ¼ã‚¿ã®ã¿å–å¾—å¯èƒ½
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼AãŒTenantBã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
  - ãƒ†ãƒŠãƒ³ãƒˆåˆ‡æ›¿å¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ—å¤‰æ›´ç¢ºèª

â–¡ å¯¾è±¡Repositoryç¶²ç¾…ãƒ†ã‚¹ãƒˆ
  - å…¨findBy*ãƒ¡ã‚½ãƒƒãƒ‰ã®tenantIdæ•´åˆæ€§ç¢ºèª
  - ã‚«ã‚¹ã‚¿ãƒ ã‚¯ã‚¨ãƒªã®SQLãƒ¬ãƒ“ãƒ¥ãƒ¼
```

---

### 3.4 ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤/é€€ä¼š

#### 3.4.1 ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ†ãƒŠãƒ³ãƒˆé›¢è„±/å‰Šé™¤ãƒ•ãƒ­ãƒ¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ã€ãƒ¡ãƒ³ãƒãƒ¼é›¢è„±ã€‘                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ é›¢è„±     â”‚â”€â”€â”€â–¶â”‚ UserTenantâ”‚â”€â”€â”€â–¶â”‚ å®Œäº†     â”‚                              â”‚
â”‚  â”‚ ãƒœã‚¿ãƒ³   â”‚    â”‚ å‰Šé™¤      â”‚    â”‚ é€šçŸ¥     â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â”‚  ã€ã‚ªãƒ¼ãƒŠãƒ¼é€€ä¼šï¼ˆæ¡ä»¶ä»˜ãï¼‰ã€‘                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ é€€ä¼š     â”‚â”€â”€â”€â–¶â”‚ ä»–ãƒ¡ãƒ³ãƒãƒ¼ãªã— or ã‚ªãƒ¼ãƒŠãƒ¼å§”è­²æ¸ˆã¿ï¼Ÿ    â”‚                â”‚
â”‚  â”‚ ãƒœã‚¿ãƒ³   â”‚    â”‚  â”œâ”€ Yes: ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤å¯èƒ½               â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€ No: ã‚ªãƒ¼ãƒŠãƒ¼å§”è­²ãŒå¿…è¦             â”‚                â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                             â”‚
â”‚  ã€ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤ã€‘                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ç¢ºèª     â”‚â”€â”€â”€â–¶â”‚ çŒ¶äºˆæœŸé–“ â”‚â”€â”€â”€â–¶â”‚ æœ€çµ‚ç¢ºèª â”‚â”€â”€â”€â–¶â”‚ ãƒ‡ãƒ¼ã‚¿   â”‚             â”‚
â”‚  â”‚ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°â”‚    â”‚ (30æ—¥)   â”‚    â”‚ (7æ—¥å‰)  â”‚    â”‚ å‰Šé™¤     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€‘                                                              â”‚
â”‚  - å³åº§: isActive=falseã€æ‹›å¾…åœæ­¢                                            â”‚
â”‚  - 30æ—¥å¾Œ: è«–ç†å‰Šé™¤ï¼ˆdeleteFlag=trueï¼‰                                       â”‚
â”‚  - 90æ—¥å¾Œ: ç‰©ç†å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.4.2 APIè¨­è¨ˆ

```yaml
# ãƒ†ãƒŠãƒ³ãƒˆé›¢è„±
POST /tenants/{tenantId}/leave
Headers:
  Authorization: Bearer <token>
Response:
  200: { left: true }
  403: { error: "ã‚ªãƒ¼ãƒŠãƒ¼ã¯é›¢è„±ã§ãã¾ã›ã‚“ã€‚å…ˆã«ã‚ªãƒ¼ãƒŠãƒ¼æ¨©é™ã‚’å§”è­²ã—ã¦ãã ã•ã„" }

# ã‚ªãƒ¼ãƒŠãƒ¼å§”è­²
POST /tenants/{tenantId}/transfer-ownership
Request:
  newOwnerId: string (required, æ—¢å­˜ãƒ¡ãƒ³ãƒãƒ¼ã®userId)
Response:
  200: { transferred: true, newOwner: {...} }
  403: { error: "ã‚ªãƒ¼ãƒŠãƒ¼æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“" }

# ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤è¦æ±‚
POST /tenants/{tenantId}/delete-request
Response:
  200:
    scheduledDeletionAt: "2025-12-28T00:00:00Z"
    message: "30æ—¥å¾Œã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯ /cancel-deletion ã§å¯èƒ½ã§ã™"

# å‰Šé™¤ã‚­ãƒ£ãƒ³ã‚»ãƒ«
POST /tenants/{tenantId}/cancel-deletion
Response:
  200: { cancelled: true }
```

---

### 3.5 ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†UI (Admin)

#### 3.5.1 ç”»é¢è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Admin ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ç”»é¢                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ã€/admin/tenants ä¸€è¦§ç”»é¢ã€‘                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ¤œç´¢: [_______________] ãƒ•ã‚£ãƒ«ã‚¿: [ã‚¢ã‚¯ãƒ†ã‚£ãƒ–â–¼] [ä½œæˆâ–¼]             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ ID     â”‚ ãƒ†ãƒŠãƒ³ãƒˆå    â”‚ ã‚ªãƒ¼ãƒŠãƒ¼ â”‚ ãƒ¡ãƒ³ãƒãƒ¼æ•°â”‚ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹â”‚ æ“ä½œ  â”‚ â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚ â”‚ abc123 â”‚ My Workspace â”‚ John Doe â”‚ 5        â”‚ PRO      â”‚ [...]  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ def456 â”‚ Team Alpha   â”‚ Jane     â”‚ 12       â”‚ MAX      â”‚ [...]  â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ã€/admin/tenants/:id è©³ç´°ç”»é¢ã€‘                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [åŸºæœ¬æƒ…å ±ã‚¿ãƒ–] [ãƒ¡ãƒ³ãƒãƒ¼ã‚¿ãƒ–] [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚¿ãƒ–] [ç›£æŸ»ãƒ­ã‚°ã‚¿ãƒ–]        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ ãƒ†ãƒŠãƒ³ãƒˆå: My Workspace                                              â”‚  â”‚
â”‚  â”‚ è¡¨ç¤ºå: ãƒã‚¤ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹                                            â”‚  â”‚
â”‚  â”‚ èª¬æ˜: é–‹ç™ºãƒãƒ¼ãƒ ç”¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹                                      â”‚  â”‚
â”‚  â”‚ ä½œæˆæ—¥: 2025-10-01                                                    â”‚  â”‚
â”‚  â”‚ ã‚ªãƒ¼ãƒŠãƒ¼: John Doe (john@example.com)                                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ [ç·¨é›†] [ç„¡åŠ¹åŒ–] [å‰Šé™¤]                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.2 Admin APIè¨­è¨ˆ

```yaml
# ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§ï¼ˆç®¡ç†è€…ï¼‰
GET /admin/tenants
Query:
  page: number
  size: number
  q: string (æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰)
  active: boolean
  sortBy: "createdAt" | "memberCount"
Response:
  200: TenantListResponse

# ãƒ†ãƒŠãƒ³ãƒˆè©³ç´°ï¼ˆç®¡ç†è€…ï¼‰
GET /admin/tenants/{tenantId}
Response:
  200:
    tenant: {...}
    members: [...]
    licenses: [...]
    statistics: { memberCount, activeUsers, ... }

# ãƒ†ãƒŠãƒ³ãƒˆæ›´æ–°ï¼ˆç®¡ç†è€…ï¼‰
PUT /admin/tenants/{tenantId}
Request:
  displayName: string
  isActive: boolean
Response:
  200: Tenant

# ãƒ†ãƒŠãƒ³ãƒˆå¼·åˆ¶å‰Šé™¤ï¼ˆç®¡ç†è€…ï¼‰
DELETE /admin/tenants/{tenantId}
Response:
  200: { deleted: true }
```

---

## 4. å®Ÿè£…ã‚¿ã‚¹ã‚¯ã¾ã¨ã‚

```
ã€Phase 1: åŸºç›¤API (Week 1-2)ã€‘
â–¡ TenantService.java å®Ÿè£…
â–¡ TenantController.java å®Ÿè£…
â–¡ InvitationService.java å®Ÿè£…
â–¡ InvitationController.java å®Ÿè£…
â–¡ æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

ã€Phase 2: Adminæ©Ÿèƒ½ (Week 3-4)ã€‘
â–¡ AdminTenantService.java å®Ÿè£…
â–¡ AdminTenantController.java å®Ÿè£…
â–¡ ãƒ†ãƒŠãƒ³ãƒˆé›¢è„±/å‰Šé™¤API
â–¡ ã‚ªãƒ¼ãƒŠãƒ¼å§”è­²API

ã€Phase 3: Frontend (Week 5-6)ã€‘
â–¡ ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
â–¡ æ‹›å¾…ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ä¸€è¦§
â–¡ æ‹›å¾…æ‰¿èªãƒšãƒ¼ã‚¸
â–¡ Admin ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ç”»é¢

ã€Phase 4: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ– (Week 7-8)ã€‘
â–¡ Hibernateãƒ•ã‚£ãƒ«ã‚¿å®Ÿè£…ï¼ˆã¾ãŸã¯æ¤œè¨¼ãƒ†ã‚¹ãƒˆï¼‰
â–¡ ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢E2Eãƒ†ã‚¹ãƒˆ
```

---

## 5. å·¥æ•°è¦‹ç©ã‚‚ã‚Š

| æ©Ÿèƒ½ | è¦‹ç©ã‚‚ã‚Š | å‚™è€ƒ |
|------|----------|------|
| ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | 3æ—¥ | API + UI |
| æ‹›å¾…æ©Ÿèƒ½ | 5æ—¥ | API + ãƒ¡ãƒ¼ãƒ« + UI |
| ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æ¤œè¨¼ | 2æ—¥ | ãƒ†ã‚¹ãƒˆä½œæˆ |
| é›¢è„±/å‰Šé™¤ | 3æ—¥ | API + UI |
| Admin UI | 4æ—¥ | ä¸€è¦§ + è©³ç´° |
| **åˆè¨ˆ** | **17æ—¥** | |

---

**ä½œæˆæ—¥**: 2025å¹´11æœˆ28æ—¥  
**ä½œæˆè€…**: GitHub Copilot ğŸ¤–
