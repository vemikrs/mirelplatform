# é–‰å¡æ©Ÿèƒ½ï¼ˆSystem Lockdownï¼‰è¨­è¨ˆæ›¸

## 1. æ¦‚è¦

ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ™‚ã«æ©Ÿèƒ½ã‚’æ®µéšçš„ã«é–‰é–ã—ã€æœ€çµ‚çš„ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’é®æ–­ã—ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã®UIã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã€‚
è¨ˆç”»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‹ã‚‰ç·Šæ€¥å¯¾å¿œã¾ã§ã€æ§˜ã€…ãªã‚·ãƒŠãƒªã‚ªã«å¯¾å¿œã™ã‚‹ã€‚

---

## 2. é³¥ç°å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            é–‰å¡æ©Ÿèƒ½ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  ã€é–‰å¡ãƒ¬ãƒ™ãƒ«éšå±¤ã€‘                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   ãƒ¬ãƒ™ãƒ«0: NORMAL (é€šå¸¸ç¨¼åƒ)                                                  â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚   ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½                                                      â”‚   â”‚
â”‚  â”‚                          â”‚                                                    â”‚   â”‚
â”‚  â”‚                          â–¼                                                    â”‚   â”‚
â”‚  â”‚   ãƒ¬ãƒ™ãƒ«1: DEGRADED (æ©Ÿèƒ½ç¸®é€€)                                                â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚   ç‰¹å®šæ©Ÿèƒ½ã®ã¿åˆ¶é™ï¼ˆä¾‹: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åœæ­¢ï¼‰                            â”‚   â”‚
â”‚  â”‚   ãƒãƒŠãƒ¼è¡¨ç¤ºã€Œä¸€éƒ¨æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€                                    â”‚   â”‚
â”‚  â”‚                          â”‚                                                    â”‚   â”‚
â”‚  â”‚                          â–¼                                                    â”‚   â”‚
â”‚  â”‚   ãƒ¬ãƒ™ãƒ«2: READ_ONLY (èª­ã¿å–ã‚Šå°‚ç”¨)                                           â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚   ã™ã¹ã¦ã®æ›¸ãè¾¼ã¿æ“ä½œã‚’ç¦æ­¢                                                  â”‚   â”‚
â”‚  â”‚   ãƒãƒŠãƒ¼è¡¨ç¤ºã€Œç¾åœ¨èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€                                    â”‚   â”‚
â”‚  â”‚                          â”‚                                                    â”‚   â”‚
â”‚  â”‚                          â–¼                                                    â”‚   â”‚
â”‚  â”‚   ãƒ¬ãƒ™ãƒ«3: LOGIN_DISABLED (ãƒ­ã‚°ã‚¤ãƒ³åœæ­¢)                                      â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚   æ–°è¦ãƒ­ã‚°ã‚¤ãƒ³ä¸å¯ã€æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ç¶­æŒ                                      â”‚   â”‚
â”‚  â”‚   ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ã€Œãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æº–å‚™ä¸­ã€è¡¨ç¤º                                    â”‚   â”‚
â”‚  â”‚                          â”‚                                                    â”‚   â”‚
â”‚  â”‚                          â–¼                                                    â”‚   â”‚
â”‚  â”‚   ãƒ¬ãƒ™ãƒ«4: MAINTENANCE (å®Œå…¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹)                                     â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚   å…¨APIãŒ503è¿”å´ã€é™çš„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒšãƒ¼ã‚¸è¡¨ç¤º                                  â”‚   â”‚
â”‚  â”‚   ç®¡ç†è€…å°‚ç”¨ãƒã‚¤ãƒ‘ã‚¹ã®ã¿æœ‰åŠ¹                                                  â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  ã€é–‰å¡åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã€‘                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ Admin API   â”‚â”€â”€â”€â”€â–¶â”‚ LockdownService  â”‚â”€â”€â”€â”€â–¶â”‚ SystemStatus (Redis)    â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ /admin/     â”‚     â”‚ - setLevel()     â”‚     â”‚ - lockdownLevel         â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ lockdown    â”‚     â”‚ - addException() â”‚     â”‚ - message               â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ - schedule()     â”‚     â”‚ - estimatedEndTime      â”‚   â”‚   â”‚
â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ - allowedIPs            â”‚   â”‚   â”‚
â”‚  â”‚                                                â”‚ - exceptions            â”‚   â”‚   â”‚
â”‚  â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                            â”‚                  â”‚   â”‚
â”‚  â”‚                                                            â–¼                  â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚   â”‚                    LockdownFilter (Spring Security)                  â”‚    â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   â”‚
â”‚  â”‚   â”‚ 1. Redisã‹ã‚‰ç¾åœ¨ã®lockdownLevelã‚’å–å¾—                                â”‚    â”‚   â”‚
â”‚  â”‚   â”‚ 2. ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ¤å®š                                    â”‚    â”‚   â”‚
â”‚  â”‚   â”‚    - è¨±å¯: é€šé                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â”‚    - æ‹’å¦: 503 + JSON or ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒšãƒ¼ã‚¸                          â”‚    â”‚   â”‚
â”‚  â”‚   â”‚ 3. ä¾‹å¤–æ¡ä»¶ã‚’ãƒã‚§ãƒƒã‚¯ï¼ˆAdmin IP, ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç­‰ï¼‰                  â”‚    â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚  ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºã€‘                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   DEGRADED / READ_ONLY:                                                       â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚   â”‚ âš ï¸ ç¾åœ¨ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«å‘ã‘ãŸæº–å‚™ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚           â”‚    â”‚   â”‚
â”‚  â”‚   â”‚    ä¸€éƒ¨æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Œäº†äºˆå®š: 12/1 6:00                  â”‚    â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   MAINTENANCE:                                                                â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚   â”‚                                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â”‚                    ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­                         â”‚    â”‚   â”‚
â”‚  â”‚   â”‚                                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â”‚         ç¾åœ¨ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚                   â”‚    â”‚   â”‚
â”‚  â”‚   â”‚         ã”ä¸ä¾¿ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚                       â”‚    â”‚   â”‚
â”‚  â”‚   â”‚                                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â”‚         äºˆå®šçµ‚äº†æ™‚åˆ»: 2025å¹´12æœˆ1æ—¥ 6:00 (JST)                       â”‚    â”‚   â”‚
â”‚  â”‚   â”‚                                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â”‚         [ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸]  [ãŠå•ã„åˆã‚ã›]                           â”‚    â”‚   â”‚
â”‚  â”‚   â”‚                                                                      â”‚    â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 3.1 é–‰å¡çŠ¶æ…‹ï¼ˆRedisï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            é–‰å¡çŠ¶æ…‹ Redisæ§‹é€                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Key: mirel:lockdown:status                                                          â”‚
â”‚  Type: Hash                                                                          â”‚
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "level": "MAINTENANCE",                    // ç¾åœ¨ã®é–‰å¡ãƒ¬ãƒ™ãƒ«                    â”‚
â”‚    "message": "å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã§ã™",        // è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸                      â”‚
â”‚    "reason": "SCHEDULED_MAINTENANCE",         // ç†ç”±ã‚³ãƒ¼ãƒ‰                          â”‚
â”‚    "startedAt": "2025-12-01T02:00:00Z",       // é–‹å§‹æ—¥æ™‚                            â”‚
â”‚    "estimatedEndAt": "2025-12-01T06:00:00Z",  // çµ‚äº†äºˆå®šæ—¥æ™‚                        â”‚
â”‚    "startedBy": "user-admin-001",             // é–‹å§‹ã—ãŸç®¡ç†è€…                      â”‚
â”‚    "allowedIPs": "10.0.0.0/8,192.168.1.100",  // è¨±å¯IPï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰              â”‚
â”‚    "bypassToken": "abc123..."                 // ç·Šæ€¥ãƒã‚¤ãƒ‘ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³                â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  Key: mirel:lockdown:exceptions                                                      â”‚
â”‚  Type: Set                                                                           â”‚
â”‚  Value: é–‰å¡å¯¾è±¡å¤–ã®ãƒ‘ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³                                                     â”‚
â”‚  {                                                                                   â”‚
â”‚    "/actuator/health",                                                               â”‚
â”‚    "/admin/lockdown/**",                                                             â”‚
â”‚    "/maintenance.html"                                                               â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  Key: mirel:lockdown:disabled-features                                               â”‚
â”‚  Type: Set                                                                           â”‚
â”‚  Value: DEGRADEDãƒ¢ãƒ¼ãƒ‰ã§ç„¡åŠ¹åŒ–ã™ã‚‹æ©Ÿèƒ½                                               â”‚
â”‚  {                                                                                   â”‚
â”‚    "FILE_UPLOAD",                                                                    â”‚
â”‚    "EXPORT",                                                                         â”‚
â”‚    "BATCH_PROCESS"                                                                   â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é–‰å¡å±¥æ­´ï¼ˆDatabaseï¼‰

```java
@Entity
@Table(name = "mir_lockdown_history")
public class LockdownHistory {
    @Id
    private String id;
    
    @Enumerated(EnumType.STRING)
    private LockdownLevel level;
    
    @Enumerated(EnumType.STRING)
    private LockdownReason reason;
    
    private String message;
    
    @Enumerated(EnumType.STRING)
    private LockdownAction action;  // STARTED, ESCALATED, DEESCALATED, ENDED
    
    private Instant occurredAt;
    
    private Instant estimatedEndAt;
    
    private String initiatedBy;     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
    
    private String metadata;        // JSON: è¿½åŠ æƒ…å ±
    
    private Instant createdAt;
}

public enum LockdownLevel {
    NORMAL(0),
    DEGRADED(1),
    READ_ONLY(2),
    LOGIN_DISABLED(3),
    MAINTENANCE(4);
    
    private final int severity;
}

public enum LockdownReason {
    SCHEDULED_MAINTENANCE,   // è¨ˆç”»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
    EMERGENCY_MAINTENANCE,   // ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
    SECURITY_INCIDENT,       // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ
    CAPACITY_ISSUE,          // ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£å•é¡Œ
    DEPLOY,                  // ãƒ‡ãƒ—ãƒ­ã‚¤ä¸­
    DATABASE_MAINTENANCE,    // DB ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
    OTHER                    // ãã®ä»–
}

public enum LockdownAction {
    STARTED,        // é–‰å¡é–‹å§‹
    ESCALATED,      // ãƒ¬ãƒ™ãƒ«ä¸Šæ˜‡
    DEESCALATED,    // ãƒ¬ãƒ™ãƒ«ä½ä¸‹
    ENDED           // é–‰å¡è§£é™¤
}
```

---

## 4. é–‰å¡ãƒ¬ãƒ™ãƒ«åˆ¥ã®å‹•ä½œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é–‰å¡ãƒ¬ãƒ™ãƒ«åˆ¥ å‹•ä½œãƒãƒˆãƒªã‚¯ã‚¹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  æ©Ÿèƒ½ / ãƒ¬ãƒ™ãƒ«        â”‚ NORMAL â”‚ DEGRADED â”‚ READ_ONLY â”‚ LOGIN_OFF â”‚ MAINTENANCE   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ãƒ­ã‚°ã‚¤ãƒ³              â”‚   âœ…   â”‚    âœ…    â”‚     âœ…    â”‚    âŒ     â”‚     âŒ       â”‚
â”‚ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ            â”‚   âœ…   â”‚    âœ…    â”‚     âœ…    â”‚    âœ…     â”‚     âŒ       â”‚
â”‚ å‚ç…§ç³»API             â”‚   âœ…   â”‚    âœ…    â”‚     âœ…    â”‚    âœ…     â”‚     âŒ       â”‚
â”‚ æ›´æ–°ç³»API             â”‚   âœ…   â”‚    âœ…    â”‚     âŒ    â”‚    âŒ     â”‚     âŒ       â”‚
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰  â”‚   âœ…   â”‚    âš ï¸    â”‚     âŒ    â”‚    âŒ     â”‚     âŒ       â”‚
â”‚ ãƒãƒƒãƒå‡¦ç†            â”‚   âœ…   â”‚    âš ï¸    â”‚     âŒ    â”‚    âŒ     â”‚     âŒ       â”‚
â”‚ ç®¡ç†è€…ã‚¢ã‚¯ã‚»ã‚¹        â”‚   âœ…   â”‚    âœ…    â”‚     âœ…    â”‚    âœ…     â”‚    âš ï¸*       â”‚
â”‚ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯        â”‚   âœ…   â”‚    âœ…    â”‚     âœ…    â”‚    âœ…     â”‚     âœ…       â”‚
â”‚ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒšãƒ¼ã‚¸    â”‚   -    â”‚    -     â”‚     -     â”‚    -      â”‚     âœ…       â”‚
â”‚                       â”‚        â”‚          â”‚           â”‚           â”‚              â”‚
â”‚ ãƒãƒŠãƒ¼è¡¨ç¤º            â”‚   -    â”‚  è­¦å‘Š    â”‚   è­¦å‘Š    â”‚   è­¦å‘Š    â”‚ ãƒ¡ãƒ³ãƒ†ç”»é¢   â”‚
â”‚                       â”‚        â”‚          â”‚           â”‚           â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‡¡ä¾‹: âœ… è¨±å¯  âŒ æ‹’å¦  âš ï¸ è¨­å®šæ¬¡ç¬¬  âš ï¸* ãƒã‚¤ãƒ‘ã‚¹å¿…è¦
```

---

## 5. APIè¨­è¨ˆ

### 5.1 é–‰å¡åˆ¶å¾¡APIï¼ˆAdminå°‚ç”¨ï¼‰

```yaml
# ç¾åœ¨ã®é–‰å¡çŠ¶æ…‹å–å¾—
GET /admin/lockdown/status
Response:
  200:
    level: "NORMAL"
    message: null
    reason: null
    startedAt: null
    estimatedEndAt: null
    disabledFeatures: []

# é–‰å¡ãƒ¬ãƒ™ãƒ«è¨­å®š
POST /admin/lockdown/level
Request:
  level: "MAINTENANCE"
  message: "å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ä¸­ã§ã™"
  reason: "SCHEDULED_MAINTENANCE"
  estimatedEndAt: "2025-12-01T06:00:00Z"
  allowedIPs:
    - "10.0.0.0/8"
    - "192.168.1.100"
  disabledFeatures:          # DEGRADEDã®å ´åˆã®ã¿
    - "FILE_UPLOAD"
    - "EXPORT"
Response:
  200:
    level: "MAINTENANCE"
    startedAt: "2025-12-01T02:00:00Z"
    ...

# é–‰å¡è§£é™¤
POST /admin/lockdown/release
Response:
  200:
    level: "NORMAL"
    message: null

# æ®µéšçš„é–‰å¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
POST /admin/lockdown/schedule
Request:
  schedule:
    - time: "2025-12-01T01:30:00Z"
      level: "DEGRADED"
      message: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æº–å‚™ä¸­ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åœæ­¢ï¼‰"
    - time: "2025-12-01T01:50:00Z"
      level: "READ_ONLY"
      message: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æº–å‚™ä¸­ï¼ˆæ›¸ãè¾¼ã¿åœæ­¢ï¼‰"
    - time: "2025-12-01T01:55:00Z"
      level: "LOGIN_DISABLED"
      message: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é–‹å§‹ç›´å‰ï¼ˆæ–°è¦ãƒ­ã‚°ã‚¤ãƒ³åœæ­¢ï¼‰"
    - time: "2025-12-01T02:00:00Z"
      level: "MAINTENANCE"
      message: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­"
    - time: "2025-12-01T06:00:00Z"
      level: "NORMAL"
      message: null
  estimatedEndAt: "2025-12-01T06:00:00Z"
  reason: "SCHEDULED_MAINTENANCE"
Response:
  201:
    scheduleId: "sched-001"
    steps: [...]

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèª
GET /admin/lockdown/schedule
Response:
  200:
    scheduleId: "sched-001"
    steps:
      - time: "2025-12-01T01:30:00Z"
        level: "DEGRADED"
        status: "PENDING"
      - ...

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚­ãƒ£ãƒ³ã‚»ãƒ«
DELETE /admin/lockdown/schedule
Response:
  204

# é–‰å¡å±¥æ­´å–å¾—
GET /admin/lockdown/history
Query:
  from: "2025-11-01T00:00:00Z"
  to: "2025-12-01T00:00:00Z"
Response:
  200:
    - id: "hist-001"
      level: "MAINTENANCE"
      action: "STARTED"
      occurredAt: "2025-11-15T02:00:00Z"
      initiatedBy: "admin@example.com"
      ...
```

### 5.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‘ã‘API

```yaml
# é–‰å¡çŠ¶æ…‹ç¢ºèªï¼ˆèªè¨¼ä¸è¦ï¼‰
GET /system/status
Response:
  200:
    status: "OPERATIONAL"  # or "DEGRADED", "MAINTENANCE"
    level: "NORMAL"
    message: null
    estimatedEndAt: null
    banner:
      type: null           # "warning" | "error" | null
      message: null
      dismissible: true

# MAINTENANCEæ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹
  503:
    status: "MAINTENANCE"
    message: "å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ä¸­ã§ã™"
    estimatedEndAt: "2025-12-01T06:00:00Z"
    statusPageUrl: "https://status.mirel.dev"
    contactUrl: "https://support.mirel.dev"
```

---

## 6. Filterå®Ÿè£…

```java
@Component
@Order(Ordered.HIGHEST_PRECEDENCE)
public class LockdownFilter extends OncePerRequestFilter {
    
    @Autowired
    private LockdownService lockdownService;
    
    @Override
    protected void doFilterInternal(
            HttpServletRequest request,
            HttpServletResponse response,
            FilterChain filterChain) throws ServletException, IOException {
        
        LockdownStatus status = lockdownService.getCurrentStatus();
        
        // 1. ä¾‹å¤–ãƒ‘ã‚¹ã¯å¸¸ã«é€šé
        if (isExceptionPath(request.getRequestURI())) {
            filterChain.doFilter(request, response);
            return;
        }
        
        // 2. ãƒ¬ãƒ™ãƒ«åˆ¥åˆ¤å®š
        switch (status.getLevel()) {
            case NORMAL:
                filterChain.doFilter(request, response);
                break;
                
            case DEGRADED:
                if (isDisabledFeature(request)) {
                    sendFeatureDisabledResponse(response, status);
                } else {
                    filterChain.doFilter(request, response);
                }
                break;
                
            case READ_ONLY:
                if (isWriteOperation(request)) {
                    sendReadOnlyResponse(response, status);
                } else {
                    filterChain.doFilter(request, response);
                }
                break;
                
            case LOGIN_DISABLED:
                if (isLoginRequest(request)) {
                    sendLoginDisabledResponse(response, status);
                } else if (isWriteOperation(request)) {
                    sendReadOnlyResponse(response, status);
                } else {
                    filterChain.doFilter(request, response);
                }
                break;
                
            case MAINTENANCE:
                if (isAdminBypass(request, status)) {
                    filterChain.doFilter(request, response);
                } else {
                    sendMaintenanceResponse(request, response, status);
                }
                break;
        }
    }
    
    private boolean isAdminBypass(HttpServletRequest request, LockdownStatus status) {
        // 1. IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆç¢ºèª
        String clientIP = getClientIP(request);
        if (status.getAllowedIPs().stream().anyMatch(cidr -> matchesCIDR(clientIP, cidr))) {
            return true;
        }
        
        // 2. ãƒã‚¤ãƒ‘ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç¢ºèª
        String bypassToken = request.getHeader("X-Lockdown-Bypass");
        if (bypassToken != null && bypassToken.equals(status.getBypassToken())) {
            return true;
        }
        
        return false;
    }
    
    private void sendMaintenanceResponse(
            HttpServletRequest request,
            HttpServletResponse response,
            LockdownStatus status) throws IOException {
        
        response.setStatus(HttpServletResponse.SC_SERVICE_UNAVAILABLE);
        response.setHeader("Retry-After", calculateRetryAfter(status.getEstimatedEndAt()));
        
        // Accept ãƒ˜ãƒƒãƒ€ãƒ¼ã§åˆ¤å®š
        String accept = request.getHeader("Accept");
        if (accept != null && accept.contains("application/json")) {
            // APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ JSON
            response.setContentType("application/json");
            response.getWriter().write(buildMaintenanceJson(status));
        } else {
            // ãƒ–ãƒ©ã‚¦ã‚¶ â†’ HTMLãƒšãƒ¼ã‚¸
            response.setContentType("text/html");
            response.sendRedirect("/maintenance.html");
        }
    }
}
```

---

## 7. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

### 7.1 ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒšãƒ¼ã‚¸

```html
<!-- apps/frontend-v3/public/maintenance.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ | mirelplatform</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      background: white;
      border-radius: 16px;
      padding: 48px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
    }
    .icon { font-size: 64px; margin-bottom: 24px; }
    h1 { color: #1a202c; margin-bottom: 16px; font-size: 24px; }
    p { color: #4a5568; line-height: 1.6; margin-bottom: 24px; }
    .time {
      background: #f7fafc;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 24px;
    }
    .time-label { color: #718096; font-size: 14px; }
    .time-value { color: #2d3748; font-size: 18px; font-weight: 600; }
    .links { display: flex; gap: 16px; justify-content: center; }
    .links a {
      color: #667eea;
      text-decoration: none;
      font-size: 14px;
    }
    .links a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <div class="icon">ğŸ”§</div>
    <h1>ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­</h1>
    <p>
      ç¾åœ¨ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚<br>
      ã”ä¸ä¾¿ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚
    </p>
    <div class="time">
      <div class="time-label">äºˆå®šçµ‚äº†æ™‚åˆ»</div>
      <div class="time-value" id="estimated-end">èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>
    <div class="links">
      <a href="https://status.mirel.dev" target="_blank">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸</a>
      <a href="https://support.mirel.dev" target="_blank">ãŠå•ã„åˆã‚ã›</a>
    </div>
  </div>
  <script>
    fetch('/system/status')
      .then(r => r.json())
      .then(data => {
        if (data.estimatedEndAt) {
          const date = new Date(data.estimatedEndAt);
          document.getElementById('estimated-end').textContent = 
            date.toLocaleString('ja-JP', { 
              year: 'numeric', month: 'long', day: 'numeric',
              hour: '2-digit', minute: '2-digit'
            });
        }
      })
      .catch(() => {
        document.getElementById('estimated-end').textContent = 'æœªå®š';
      });
  </script>
</body>
</html>
```

### 7.2 è­¦å‘ŠãƒãƒŠãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
// apps/frontend-v3/src/components/system/LockdownBanner.tsx
export function LockdownBanner() {
  const { data: status } = useSystemStatus();
  
  if (!status?.banner?.message) return null;
  
  return (
    <Alert variant={status.banner.type === 'error' ? 'destructive' : 'warning'}>
      <AlertTriangle className="h-4 w-4" />
      <AlertTitle>ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãŠçŸ¥ã‚‰ã›</AlertTitle>
      <AlertDescription>
        {status.banner.message}
        {status.estimatedEndAt && (
          <span className="ml-2 text-muted-foreground">
            å®Œäº†äºˆå®š: {formatDateTime(status.estimatedEndAt)}
          </span>
        )}
      </AlertDescription>
    </Alert>
  );
}

// RootLayout.tsx ã«è¿½åŠ 
function RootLayout() {
  return (
    <>
      <LockdownBanner />
      {/* ... */}
    </>
  );
}
```

---

## 8. å®Ÿè£…ã‚¿ã‚¹ã‚¯

```
ã€Phase 1: ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ (3æ—¥)ã€‘
â–¡ LockdownService å®Ÿè£…
â–¡ RedisçŠ¶æ…‹ç®¡ç†
â–¡ LockdownHistory Entity
â–¡ LockdownFilter å®Ÿè£…

ã€Phase 2: API (2æ—¥)ã€‘
â–¡ AdminLockdownController
â–¡ SystemStatusControllerï¼ˆå…¬é–‹ï¼‰
â–¡ èªå¯è¨­å®š

ã€Phase 3: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ© (2æ—¥)ã€‘
â–¡ æ®µéšçš„é–‰å¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
â–¡ è‡ªå‹•ãƒ¬ãƒ™ãƒ«å¤‰æ›´
â–¡ é€šçŸ¥é€£æº

ã€Phase 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (2æ—¥)ã€‘
â–¡ maintenance.htmlï¼ˆé™çš„ï¼‰
â–¡ LockdownBanner ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â–¡ API ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ‹¡å¼µ

ã€Phase 5: ç®¡ç†UI (2æ—¥)ã€‘
â–¡ Admin é–‰å¡åˆ¶å¾¡ç”»é¢
â–¡ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šUI
â–¡ å±¥æ­´è¡¨ç¤º
```

---

## 9. å·¥æ•°è¦‹ç©ã‚‚ã‚Š

| æ©Ÿèƒ½ | è¦‹ç©ã‚‚ã‚Š | å‚™è€ƒ |
|------|----------|------|
| ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ | 3æ—¥ | Filter + Redis |
| API | 2æ—¥ | Admin + Public |
| ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ© | 2æ—¥ | æ®µéšçš„é–‰å¡ |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒšãƒ¼ã‚¸ + ãƒãƒŠãƒ¼ |
| ç®¡ç†UI | 2æ—¥ | åˆ¶å¾¡ç”»é¢ |
| **åˆè¨ˆ** | **11æ—¥** | |

---

**ä½œæˆæ—¥**: 2025å¹´11æœˆ28æ—¥  
**ä½œæˆè€…**: GitHub Copilot ğŸ¤–


