# é–‹ç™ºè€…ä½“é¨“ï¼ˆDeveloper Experienceï¼‰æ©Ÿèƒ½ è¨­è¨ˆæ›¸

## ğŸ“‹ æ¦‚è¦

å¤–éƒ¨é–‹ç™ºè€…ãƒ»ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‘ã‘ã®APIãƒ»é–‹ç™ºè€…ãƒãƒ¼ã‚¿ãƒ«æ©Ÿèƒ½ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Developer Experience Architecture                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         API Gateway Layer                                    â”‚  â”‚
â”‚  â”‚                                                                              â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚   Rate     â”‚  â”‚   API      â”‚  â”‚  Request   â”‚  â”‚  Response  â”‚          â”‚  â”‚
â”‚  â”‚   â”‚  Limiting  â”‚â†’ â”‚   Auth     â”‚â†’ â”‚  Logging   â”‚â†’ â”‚ Transform  â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                                          â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚        â–¼                                â–¼                                â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   REST     â”‚              â”‚    Webhook     â”‚              â”‚    GraphQL     â”‚  â”‚
â”‚  â”‚    API     â”‚              â”‚    System      â”‚              â”‚    Gateway     â”‚  â”‚
â”‚  â”‚            â”‚              â”‚                â”‚              â”‚   (å°†æ¥)       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚OpenAPI â”‚ â”‚              â”‚ â”‚  Event     â”‚ â”‚              â”‚ â”‚  Schema    â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ Spec   â”‚ â”‚              â”‚ â”‚  Router    â”‚ â”‚              â”‚ â”‚  Stitching â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚  SDK   â”‚ â”‚              â”‚ â”‚  Delivery  â”‚ â”‚              â”‚ â”‚Subscriptionâ”‚ â”‚  â”‚
â”‚  â”‚ â”‚ Gen    â”‚ â”‚              â”‚ â”‚  Queue     â”‚ â”‚              â”‚ â”‚  Engine    â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚                                â”‚                                          â”‚
â”‚        â–¼                                â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Developer Portal                                     â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚   â”‚  API Docs    â”‚  â”‚  Try It Out  â”‚  â”‚  API Keys    â”‚  â”‚   Webhooks   â”‚   â”‚  â”‚
â”‚  â”‚   â”‚  (Swagger)   â”‚  â”‚              â”‚  â”‚  Management  â”‚  â”‚   Config     â”‚   â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1ï¸âƒ£ REST API SDK

### 1.1 SDKæˆ¦ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SDK Generation Pipeline                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚  Spring Boot  â”‚                                                         â”‚
â”‚  â”‚  Controllers  â”‚                                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Springdoc   â”‚ â†’   â”‚              openapi.yaml                     â”‚  â”‚
â”‚  â”‚   OpenAPI     â”‚     â”‚  ãƒ»paths, schemas, responses                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                    â–¼                   â–¼                   â–¼              â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚           â”‚  TypeScript    â”‚  â”‚    Python      â”‚  â”‚     Java       â”‚     â”‚
â”‚           â”‚     SDK        â”‚  â”‚     SDK        â”‚  â”‚     SDK        â”‚     â”‚
â”‚           â”‚                â”‚  â”‚                â”‚  â”‚                â”‚     â”‚
â”‚           â”‚ @mirel/sdk-ts  â”‚  â”‚  mirel-sdk-py  â”‚  â”‚ mirel-sdk-java â”‚     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â”‚                   â”‚                   â”‚              â”‚
â”‚                    â–¼                   â–¼                   â–¼              â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚           â”‚     npm        â”‚  â”‚     PyPI       â”‚  â”‚   Maven Ctr    â”‚     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 SDKè¨­è¨ˆåŸå‰‡

```typescript
// TypeScript SDKä½¿ç”¨ä¾‹
import { MirelClient } from '@mirel/sdk-ts';

const client = new MirelClient({
  apiKey: 'mk_live_xxx',
  tenantId: 'tenant-123',
  baseUrl: 'https://api.mirel.example.com', // ã‚ªãƒ—ã‚·ãƒ§ãƒ³
});

// å‹å®‰å…¨ãªAPIå‘¼ã³å‡ºã—
const users = await client.users.list({
  page: 1,
  perPage: 20,
  status: 'active',
});

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try {
  const user = await client.users.create({
    email: 'user@example.com',
    name: 'Test User',
  });
} catch (error) {
  if (error instanceof MirelApiError) {
    console.error(`API Error: ${error.code} - ${error.message}`);
  }
}
```

```python
# Python SDKä½¿ç”¨ä¾‹
from mirel import MirelClient

client = MirelClient(
    api_key="mk_live_xxx",
    tenant_id="tenant-123"
)

# Asyncå¯¾å¿œ
async def main():
    users = await client.users.list(page=1, per_page=20)
    
    for user in users.data:
        print(f"User: {user.name}")
```

### 1.3 API Keyç®¡ç†

```java
@Entity
@Table(name = "api_keys")
public class ApiKey {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private String id;

    @Column(nullable = false, unique = true)
    private String keyPrefix; // "mk_live_" or "mk_test_"

    @Column(nullable = false)
    private String keyHash; // BCryptãƒãƒƒã‚·ãƒ¥

    @Column(nullable = false)
    private String tenantId;

    private String createdByUserId;

    private String name; // è­˜åˆ¥ç”¨ã®åå‰

    @ElementCollection
    @CollectionTable(name = "api_key_scopes")
    private Set<String> scopes; // read:users, write:users, etc.

    private LocalDateTime expiresAt;
    private LocalDateTime lastUsedAt;

    private boolean isActive = true;

    @Column(columnDefinition = "jsonb")
    private String metadata; // è¿½åŠ æƒ…å ±
}
```

---

## 2ï¸âƒ£ Webhookã‚·ã‚¹ãƒ†ãƒ 

### 2.1 Webhookãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Webhook Delivery Flow                              â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Domain  â”‚ â†’  â”‚   Event     â”‚ â†’  â”‚  Webhook    â”‚ â†’  â”‚  Delivery   â”‚     â”‚
â”‚  â”‚ Event   â”‚    â”‚  Publisher  â”‚    â”‚  Router     â”‚    â”‚   Queue     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚             â”‚
â”‚                                                               â–¼             â”‚
â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                           â”‚    Webhook Delivery Worker  â”‚  â”‚
â”‚                                           â”‚                             â”‚  â”‚
â”‚                                           â”‚  1. ç½²åç”Ÿæˆ (HMAC-SHA256)  â”‚  â”‚
â”‚                                           â”‚  2. HTTP POSTé€ä¿¡           â”‚  â”‚
â”‚                                           â”‚  3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¤œè¨¼          â”‚  â”‚
â”‚                                           â”‚  4. ãƒªãƒˆãƒ©ã‚¤ (æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•)â”‚  â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚                   â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                   â–¼                                     â–¼                 â–¼â”‚â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚           â”‚  Success   â”‚                        â”‚   Retry    â”‚    â”‚ Dead â”‚â”‚â”‚
â”‚           â”‚   Log      â”‚                        â”‚   Queue    â”‚    â”‚Letterâ”‚â”‚â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚                                                                            â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```java
@Entity
@Table(name = "webhook_endpoints")
public class WebhookEndpoint {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private String id;

    @Column(nullable = false)
    private String tenantId;

    @Column(nullable = false)
    private String url;

    @Column(nullable = false)
    private String secret; // HMACç½²åç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ

    @ElementCollection
    @CollectionTable(name = "webhook_events")
    private Set<String> enabledEvents; // user.created, license.expired, etc.

    private boolean isActive = true;

    @Column(columnDefinition = "jsonb")
    private String headers; // ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼

    private String description;

    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
}

@Entity
@Table(name = "webhook_deliveries")
public class WebhookDelivery {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private String id;

    @Column(nullable = false)
    private String endpointId;

    @Column(nullable = false)
    private String eventType;

    @Column(columnDefinition = "jsonb", nullable = false)
    private String payload;

    @Enumerated(EnumType.STRING)
    private DeliveryStatus status; // PENDING, DELIVERED, FAILED, RETRYING

    private int attemptCount = 0;
    private int maxAttempts = 5;

    private LocalDateTime nextRetryAt;
    private LocalDateTime deliveredAt;

    private int responseStatusCode;
    private String responseBody;

    private LocalDateTime createdAt;
}
```

### 2.3 ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—

| ã‚«ãƒ†ã‚´ãƒª | ã‚¤ãƒ™ãƒ³ãƒˆ | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ä¾‹ |
|----------|----------|--------------|
| User | `user.created` | `{ "user": { "id", "email", "name" } }` |
| User | `user.updated` | `{ "user": { ... }, "changes": [...] }` |
| User | `user.deleted` | `{ "user": { "id" } }` |
| Tenant | `tenant.updated` | `{ "tenant": { ... } }` |
| License | `license.assigned` | `{ "license": { ... }, "user": { ... } }` |
| License | `license.expired` | `{ "license": { ... } }` |
| License | `license.renewed` | `{ "license": { ... } }` |

### 2.4 ç½²åæ¤œè¨¼

```java
@Service
public class WebhookSignatureService {
    
    public String generateSignature(String payload, String secret, long timestamp) {
        String signedPayload = timestamp + "." + payload;
        Mac hmac = Mac.getInstance("HmacSHA256");
        hmac.init(new SecretKeySpec(secret.getBytes(), "HmacSHA256"));
        byte[] hash = hmac.doFinal(signedPayload.getBytes());
        return Base64.getEncoder().encodeToString(hash);
    }
    
    // ãƒ˜ãƒƒãƒ€ãƒ¼ä¾‹: X-Mirel-Signature: t=1234567890,v1=xxxxx
}
```

```javascript
// å—ä¿¡å´ã§ã®æ¤œè¨¼ä¾‹
const crypto = require('crypto');

function verifySignature(payload, signature, secret) {
  const [timestampPart, signaturePart] = signature.split(',');
  const timestamp = timestampPart.split('=')[1];
  const expectedSig = signaturePart.split('=')[1];
  
  const signedPayload = `${timestamp}.${payload}`;
  const computed = crypto
    .createHmac('sha256', secret)
    .update(signedPayload)
    .digest('base64');
  
  return crypto.timingSafeEqual(
    Buffer.from(expectedSig),
    Buffer.from(computed)
  );
}
```

---

## 3ï¸âƒ£ OpenAPI Portal

### 3.1 ãƒãƒ¼ã‚¿ãƒ«æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Developer Portal                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Navigation                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚  Docs   â”‚ â”‚API Ref  â”‚ â”‚ SDKs    â”‚ â”‚ Webhooksâ”‚ â”‚ Sandbox â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  API Reference (Swagger UI / Redoc)                                  â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚  Endpoints             â”‚  Try It Out                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚                                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â–¼ Authentication      â”‚  POST /mapi/auth/login                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚    POST /login         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚ â”‚
â”‚  â”‚  â”‚    POST /signup        â”‚  â”‚ Request Body                        â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚    POST /refresh       â”‚  â”‚ {                                   â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚  â”‚   "email": "user@example.com",      â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â–¼ Users               â”‚  â”‚   "password": "********"            â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚    GET /users          â”‚  â”‚ }                                   â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚    POST /users         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚ â”‚
â”‚  â”‚  â”‚    GET /users/{id}     â”‚                                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚  [Execute]                              â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â–¼ Tenants             â”‚                                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚    ...                 â”‚  Response: 200 OK                       â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚  â”‚ { "accessToken": "eyJ...", ... }    â”‚â”‚â”‚ â”‚
â”‚  â”‚  â”‚                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Springdocè¨­å®š

```java
@Configuration
public class OpenApiConfig {

    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("Mirel Platform API")
                .version("1.0.0")
                .description("Mirel Platform REST API Documentation")
                .contact(new Contact()
                    .name("API Support")
                    .email("api@mirel.example.com")))
            .addSecurityItem(new SecurityRequirement()
                .addList("bearerAuth")
                .addList("apiKey"))
            .components(new Components()
                .addSecuritySchemes("bearerAuth", 
                    new SecurityScheme()
                        .type(SecurityScheme.Type.HTTP)
                        .scheme("bearer")
                        .bearerFormat("JWT"))
                .addSecuritySchemes("apiKey",
                    new SecurityScheme()
                        .type(SecurityScheme.Type.APIKEY)
                        .in(SecurityScheme.In.HEADER)
                        .name("X-API-Key")));
    }
}
```

### 3.3 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

```java
@RestController
@RequestMapping("/mapi/users")
@Tag(name = "Users", description = "User management APIs")
public class UserApiController {

    @Operation(
        summary = "List users",
        description = "Retrieve a paginated list of users in the current tenant"
    )
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "Users retrieved successfully"),
        @ApiResponse(responseCode = "401", description = "Unauthorized"),
        @ApiResponse(responseCode = "403", description = "Forbidden")
    })
    @GetMapping
    public ResponseEntity<PagedResponse<UserDto>> listUsers(
        @Parameter(description = "Page number") @RequestParam(defaultValue = "1") int page,
        @Parameter(description = "Items per page") @RequestParam(defaultValue = "20") int perPage
    ) {
        // ...
    }
}
```

---

## 4ï¸âƒ£ GraphQL Gatewayï¼ˆå°†æ¥æ¤œè¨ï¼‰

### 4.1 ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

```
REST API ã®èª²é¡Œ:
  ãƒ»Over-fetching: å¿…è¦ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿å–å¾—
  ãƒ»Under-fetching: è¤‡æ•°ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¿…è¦
  ãƒ»N+1å•é¡Œ

GraphQL ã§è§£æ±º:
  ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®š
  ãƒ»å˜ä¸€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§é–¢é€£ãƒ‡ãƒ¼ã‚¿å–å¾—
  ãƒ»å‹å®‰å…¨ãªã‚¹ã‚­ãƒ¼ãƒå®šç¾©
```

### 4.2 ã‚¹ã‚­ãƒ¼ãƒä¾‹

```graphql
type Query {
  me: User!
  user(id: ID!): User
  users(page: Int, perPage: Int, filter: UserFilter): UserConnection!
  tenant: Tenant!
}

type Mutation {
  updateUser(id: ID!, input: UpdateUserInput!): User!
  inviteUser(email: String!, role: Role!): InvitationToken!
}

type Subscription {
  notificationReceived: Notification!
}

type User {
  id: ID!
  email: String!
  name: String!
  role: Role!
  tenant: Tenant!
  licenses: [License!]!
  createdAt: DateTime!
}

type Tenant {
  id: ID!
  name: String!
  plan: PlanType!
  users: [User!]!
}

type License {
  id: ID!
  application: Application!
  tier: LicenseTier!
  expiresAt: DateTime
}
```

### 4.3 å®Ÿè£…æ–¹é‡

| é …ç›® | é¸æŠè‚¢ |
|------|--------|
| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | Spring for GraphQL (æ¨å¥¨) |
| ã‚¹ã‚­ãƒ¼ãƒç®¡ç† | Schema-first (SDL) |
| N+1å¯¾ç­– | DataLoader ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| èªè¨¼ | JWT + Contextä¼æ’­ |

---

## ğŸ“Š å·¥æ•°è¦‹ç©

| æ©Ÿèƒ½ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | åˆè¨ˆ |
|------|----------------|--------------|------|
| API Keyç®¡ç†UI | 3äººæ—¥ | 2äººæ—¥ | 5äººæ—¥ |
| TypeScript SDK | - | 5äººæ—¥ | 5äººæ—¥ |
| Python SDK | - | 5äººæ—¥ | 5äººæ—¥ |
| Webhookã‚·ã‚¹ãƒ†ãƒ  | 3äººæ—¥ | 8äººæ—¥ | 11äººæ—¥ |
| OpenAPI Portal | 2äººæ—¥ | 3äººæ—¥ | 5äººæ—¥ |
| GraphQLï¼ˆå°†æ¥ï¼‰ | 5äººæ—¥ | 15äººæ—¥ | 20äººæ—¥ |
| **åˆè¨ˆï¼ˆGraphQLé™¤ãï¼‰** | **8äººæ—¥** | **23äººæ—¥** | **31äººæ—¥** |

---

*æ¬¡: [ãƒ“ã‚¸ãƒã‚¹ãƒ»ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½](./03_business-features.md)*
