# 05_画面設計書

## 1. 概要

本書は、Mirel Schema（動的データ管理アプリケーション）の画面設計を定義する。

### 1.1 画面一覧

| 画面ID | 画面名 | パス | 説明 |
|--------|--------|------|------|
| SCR-HOME | ホーム画面 | `/apps/schema` | アプリケーションのトップページ |
| SCR-REC-LIST | レコード一覧 | `/apps/schema/record/{modelId}` | モデル別データ一覧 |
| SCR-REC-DETAIL | レコード詳細 | `/apps/schema/record/{modelId}/{id}` | データ登録・編集 |
| SCR-MDL-LIST | モデル一覧 | `/apps/schema/model` | モデル定義一覧 |
| SCR-MDL-DETAIL | モデル詳細 | `/apps/schema/model/{id}` | モデル定義編集 |
| SCR-CODE | コードマスタ | `/apps/schema/code` | コード値管理 |
| SCR-ROLE | ロール管理 | `/apps/schema/roles` | ロール・権限管理 |

---

## 2. 共通コンポーネント

### 2.1 ページレイアウト

```
+----------------------------------------------------------+
|                    ヘッダー (Header)                       |
|  [ロゴ]  [アプリ名: Mirel Schema]    [アプリ切替▼] [ユーザー情報] [ログアウト] |
+----------------------------------------------------------+
|        |                                                 |
|  サイド  |                メインコンテンツ                   |
|  バー    |                                                |
|        |                                                 |
|  ├ ホーム |                                               |
|  ├ マスタ |                                               |
|  │  ├ A  |                                               |
|  │  └ B  |                                               |
|  ├ 設定   |                                               |
|  │  ├ モデル                                              |
|  │  ├ コード                                              |
|  │  └ ロール                                              |
+--------+-------------------------------------------------+
```

### 2.2 共通コンポーネント定義

#### ヘッダー (AppHeader)
```typescript
interface AppHeaderProps {
  appName: string;
  apps: {
    appId: string;
    appName: string;
    icon: string;
    url: string;
    isActive: boolean;
  }[];
  user: {
    name: string;
    avatar?: string;
  };
  onAppSwitch: (appId: string) => void;
  onLogout: () => void;
}
```

#### サイドバー (AppSidebar)
```typescript
interface MenuItem {
  id: string;
  label: string;
  icon?: IconType;
  path?: string;
  children?: MenuItem[];
}

interface AppSidebarProps {
  menuItems: MenuItem[];
  activeItemId: string;
  onMenuSelect: (item: MenuItem) => void;
}
```

#### データテーブル (DataTable)
```typescript
interface DataTableProps<T> {
  columns: ColumnDef<T>[];
  data: T[];
  pagination?: {
    page: number;
    pageSize: number;
    total: number;
  };
  sorting?: SortingState;
  filtering?: FilterState;
  onRowClick?: (row: T) => void;
  onSort?: (sorting: SortingState) => void;
  onFilter?: (filters: FilterState) => void;
  onPageChange?: (page: number) => void;
}
```

#### フォームコンテナ (FormContainer)
```typescript
interface FormContainerProps {
  title: string;
  onSubmit: () => void;
  onCancel: () => void;
  isLoading?: boolean;
  children: React.ReactNode;
}
```

---

## 3. 画面詳細設計

### 3.1 SCR-HOME: ホーム画面

#### 画面概要
- アプリケーションのダッシュボード
- クイックアクセスメニュー表示

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   Mirel Schema - 動的データ管理               |
|        |                                                 |
|        |   +-------------------+  +-------------------+  |
|        |   | 📊 マスタデータ    |  | ⚙️ 設定           |  |
|        |   |                   |  |                   |  |
|        |   | モデルA: 123件     |  | モデル定義         |  |
|        |   | モデルB: 456件     |  | コードマスタ       |  |
|        |   +-------------------+  +-------------------+  |
|        |                                                 |
|        |   📋 最近の更新                                  |
|        |   +------------------------------------------+  |
|        |   | 日時       | 種別    | 内容              |  |
|        |   |------------|---------|-------------------|  |
|        |   | 2024/01/15 | モデルA  | データ追加 #1234 |  |
|        |   | 2024/01/15 | モデルB  | データ更新 #5678 |  |
|        |   +------------------------------------------+  |
+--------+-------------------------------------------------+
```

#### 機能仕様
| 要素 | 操作 | 動作 |
|------|------|------|
| マスタカード | クリック | レコード一覧へ遷移 |
| モデル定義 | クリック | モデル一覧へ遷移 |
| コードマスタ | クリック | コードマスタ画面へ遷移 |
| 最近の更新行 | クリック | 該当データの詳細画面へ遷移 |

---

### 3.2 SCR-REC-LIST: レコード一覧

#### 画面概要
- 指定モデルのデータ一覧を表示
- 検索・フィルタ・ソート・ページネーション機能

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   📋 モデルA - データ一覧                      |
|        |                                                 |
|        |   [検索: ________________] [🔍]  [+ 新規登録]    |
|        |                                                 |
|        |   +------------------------------------------+  |
|        |   | □ | ID    | 名称      | 更新日    | 操作 |  |
|        |   |---|-------|-----------|-----------|------|  |
|        |   | □ | #0001 | データA   | 2024/1/15 | [詳細] |
|        |   | □ | #0002 | データB   | 2024/1/14 | [詳細] |
|        |   | □ | #0003 | データC   | 2024/1/13 | [詳細] |
|        |   +------------------------------------------+  |
|        |                                                 |
|        |   [選択削除]  < 1 2 3 ... 10 >  件/ページ: [20▼] |
|        |   全 150 件中 1-20 件を表示                      |
|        |                                                 |
+--------+-------------------------------------------------+
```

#### テーブルカラム
| カラム | 表示名 | 幅 | ソート | フィルタ |
|--------|--------|-----|--------|----------|
| checkbox | (選択) | 40px | - | - |
| id | ID | 100px | ○ | ○ |
| ※動的カラム | モデル定義による | auto | ○ | ○ |
| updated_at | 更新日時 | 150px | ○ | ○ |
| actions | 操作 | 100px | - | - |

#### 動的カラム生成
```typescript
// モデル定義からカラムを動的生成
function generateColumns(model: ModelDefinition): ColumnDef[] {
  const staticColumns = [
    { id: 'checkbox', header: '', cell: CheckboxCell },
    { id: 'id', header: 'ID', cell: TextCell },
  ];
  
  const dynamicColumns = model.elements
    .filter(el => el.showInList)
    .map(el => ({
      id: el.key,
      header: el.label,
      cell: getCellRenderer(el.widgetType),
    }));
  
  return [...staticColumns, ...dynamicColumns, actionsColumn];
}
```

#### 機能仕様
| 要素 | 操作 | 動作 |
|------|------|------|
| 検索ボックス | 入力 | キーワードでフィルタリング |
| 新規登録ボタン | クリック | 詳細画面（新規）へ遷移 |
| 行 | クリック | 詳細画面へ遷移 |
| カラムヘッダ | クリック | ソート切り替え |
| 選択削除 | クリック | 確認ダイアログ後、一括削除 |
| ページネーション | クリック | ページ遷移 |

---

### 3.3 SCR-REC-DETAIL: レコード詳細

#### 画面概要
- データの登録・編集フォーム
- モデル定義に基づく動的フォーム生成

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   📝 モデルA - データ編集                      |
|        |                                                 |
|        |   [保存] [キャンセル]                [削除]        |
|        |                                                 |
|        |   +------------------------------------------+  |
|        |   |                                          |  |
|        |   |  ━━ 基本情報 ━━━━━━━━━━━━━━━━━━━━━━━━━━   |
|        |   |                                          |  |
|        |   |  名称 *                                  |  |
|        |   |  [________________________]              |  |
|        |   |  ⚠️ 必須項目です                          |
|        |   |                                          |  |
|        |   |  メールアドレス                           |  |
|        |   |  [________________________]              |  |
|        |   |  ⚠️ 形式が正しくありません                  |
|        |   |                                          |  |
|        |   |  ━━ 詳細設定 ━━━━━━━━━━━━━━━━━━━━━━━━━━   |
|        |   |                                          |  |
|        |   |  種別 *               ステータス         |  |
|        |   |  [タイプA        ▼]   [● 有効 ○ 無効]    |  |
|        |   |                                          |  |
|        |   |  金額 (0〜1,000,000)                      |  |
|        |   |  [________________]                      |  |
|        |   |                                          |  |
|        |   +------------------------------------------+  |
|        |                                                 |
+--------+-------------------------------------------------+
```

#### 動的フォーム生成
```typescript
// ウィジェットタイプに応じたコンポーネントマッピング
const widgetComponents: Record<WidgetType, React.FC<FieldProps>> = {
  text: TextField,
  textarea: TextAreaField,
  text_date: DateField,
  text_time: TimeField,
  checkbox: CheckboxField,
  selectbox: SelectField,
  tag: TagField,
  treeselect: TreeSelectField,
  htmleditor: HtmlEditorField,
  file: FileField,
  embedded: EmbeddedField,  // 子モデル（inline）
  detail: DetailField,       // 子モデル（modal）
  break: BreakComponent,     // 改行
  title: TitleComponent,     // セクションタイトル
};

// フォーム生成
function generateForm(model: ModelDefinition): React.ReactNode {
  return model.elements.map(el => {
    const Component = widgetComponents[el.widgetType];
    return (
      <Component
        key={el.key}
        label={el.label}
        required={el.required}
        validation={{
          regexPattern: el.regexPattern,
          minLength: el.minLength,
          maxLength: el.maxLength,
          minValue: el.minValue,
          maxValue: el.maxValue,
        }}
        options={el.codeGroup ? getCodeOptions(el.codeGroup) : undefined}
      />
    );
  });
}
```

#### ウィジェット別仕様

##### text (テキスト入力)
```
+------------------------------------------+
| ラベル名 *                               |
| [入力値___________________________]      |
| ⚠️ バリデーションエラーメッセージ          |
+------------------------------------------+
```
- 最大文字数制限（minLength/maxLength）
- 正規表現バリデーション対応（regexPattern）

##### textarea (複数行テキスト)
```
+------------------------------------------+
| ラベル名                                 |
| +------------------------------------+   |
| | 複数行のテキスト入力エリア           |   |
| |                                    |   |
| |                                    |   |
| +------------------------------------+   |
| 0/1000 文字                              |
+------------------------------------------+
```
- 行数指定対応
- リサイズ可能
- 文字数カウント表示

##### text_date (日付入力)
```
+------------------------------------------+
| ラベル名                                 |
| [📅 2024/01/15            ]              |
+------------------------------------------+
```
- カレンダーピッカー
- 表示フォーマット: YYYY/MM/DD

##### text_time (時刻入力)
```
+------------------------------------------+
| ラベル名                                 |
| [🕐 14:30                 ]              |
+------------------------------------------+
```
- 時刻ピッカー
- 表示フォーマット: HH:mm

##### checkbox (チェックボックス)
```
+------------------------------------------+
| ラベル名                                 |
| [✓] 有効にする                           |
+------------------------------------------+
```
- 単一選択
- ラベルクリックでトグル

##### selectbox (ドロップダウン)
```
+------------------------------------------+
| ラベル名 *                               |
| [選択してください            ▼]          |
| +------------------------------------+   |
| | オプション1                        |   |
| | オプション2  ← 選択中              |   |
| | オプション3                        |   |
| +------------------------------------+   |
+------------------------------------------+
```
- コードグループから選択肢を取得
- 検索フィルタ対応（10件以上の場合）

##### tag (タグ選択)
```
+------------------------------------------+
| ラベル名                                 |
| [タグA ×] [タグB ×] [+ 追加_____]         |
+------------------------------------------+
```
- 複数選択可能
- 新規タグ追加対応（設定による）

##### treeselect (ツリー選択)
```
+------------------------------------------+
| ラベル名                                 |
| [親カテゴリ > 子カテゴリ      ▼]          |
| +------------------------------------+   |
| | ▶ 親カテゴリ1                      |   |
| |   ├ 子カテゴリ1-1                  |   |
| |   └ 子カテゴリ1-2                  |   |
| | ▼ 親カテゴリ2                      |   |
| |   └ 子カテゴリ2-1                  |   |
| +------------------------------------+   |
+------------------------------------------+
```
- 階層構造の表示
- パンくずリスト表示

##### htmleditor (リッチテキスト)
```
+------------------------------------------+
| ラベル名                                 |
| +------------------------------------+   |
| | [B] [I] [U] | [H1] [H2] | [リンク] |   |
| +------------------------------------+   |
| | リッチテキストエディタ               |   |
| | 太字、斜体、リンクなど対応           |   |
| +------------------------------------+   |
+------------------------------------------+
```
- TipTap/ProseMirror ベース
- 基本的なフォーマット対応

##### file (ファイルアップロード)
```
+------------------------------------------+
| ラベル名                                 |
| +------------------------------------+   |
| | [📎 ファイルを選択]                |   |
| |                                    |   |
| | document.pdf (1.2MB)          [×]  |   |
| +------------------------------------+   |
+------------------------------------------+
```
- ドラッグ&ドロップ対応
- ファイルサイズ・種類制限

##### embedded (埋め込み)
```
+------------------------------------------+
| ━━ 子モデル ━━━━━━━━━━━━━━━━━━━━━━━━━━━   |
| +------------------------------------+   |
| | フィールド1: [__________]          |   |
| | フィールド2: [__________]          |   |
| +------------------------------------+   |
+------------------------------------------+
```
- インラインで子モデルを表示
- 親と同じ画面で編集

##### detail (詳細/モーダル)
```
+------------------------------------------+
| ラベル名                          [編集]  |
| +------------------------------------+   |
| | 関連データ1 | 関連データ2 | ...    |   |
| +------------------------------------+   |
+------------------------------------------+

[編集クリック時]
+------------------------------------------+
|             子モデル編集                  |
| +------------------------------------+   |
| | フィールド1: [__________]          |   |
| | フィールド2: [__________]          |   |
| +------------------------------------+   |
|                    [キャンセル] [保存]   |
+------------------------------------------+
```
- モーダルダイアログで編集
- 複数レコード対応

##### break (改行)
- フォームレイアウト上の改行
- 次のフィールドを新しい行に配置

##### title (タイトル)
```
+------------------------------------------+
| ━━ セクションタイトル ━━━━━━━━━━━━━━━━━━  |
+------------------------------------------+
```
- セクション区切り
- スタイル適用可能

---

### 3.4 SCR-MDL-LIST: モデル一覧

#### 画面概要
- モデル定義の一覧表示
- 新規作成・編集・削除

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   ⚙️ モデル定義                               |
|        |                                                 |
|        |   [+ 新規作成]                                   |
|        |                                                 |
|        |   +------------------------------------------+  |
|        |   | 🗂️ ルートモデル                          |  |
|        |   |  ├─ モデルA [編集] [削除]               |  |
|        |   |  │   └─ サブモデルA-1 [編集] [削除]     |  |
|        |   |  └─ モデルB [編集] [削除]               |  |
|        |   +------------------------------------------+  |
|        |                                                 |
+--------+-------------------------------------------------+
```

#### ツリー構造表示
```typescript
interface ModelTreeProps {
  rootNodes: ModelNode[];
  onEdit: (node: ModelNode) => void;
  onDelete: (node: ModelNode) => void;
  onAddChild: (parentNode: ModelNode) => void;
}

interface ModelNode {
  id: string;
  name: string;
  type: 'root' | 'model' | 'element';
  children?: ModelNode[];
}
```

---

### 3.5 SCR-MDL-DETAIL: モデル詳細

#### 画面概要
- モデル定義の編集
- 要素（フィールド）の追加・編集・並び替え

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   ⚙️ モデル定義 - モデルA                     |
|        |                                                 |
|        |   [保存] [キャンセル]                            |
|        |                                                 |
|        |   基本設定                                       |
|        |   +------------------------------------------+  |
|        |   | モデルID *       | 名称 *                |  |
|        |   | [model_a      ] | [モデルA            ] |  |
|        |   |                                          |  |
|        |   | 説明                                     |  |
|        |   | [モデルAの説明_____________________]     |  |
|        |   +------------------------------------------+  |
|        |                                                 |
|        |   フィールド定義                                 |
|        |   +------------------------------------------+  |
|        |   | ≡ | キー    | ラベル  | 種別    | 操作   |  |
|        |   |---|---------|---------|---------|--------|  |
|        |   | ≡ | name    | 名称    | text    | [編集] |  |
|        |   | ≡ | desc    | 説明    | textarea| [編集] |  |
|        |   | ≡ | status  | 状態    | selectbox| [編集]|  |
|        |   +------------------------------------------+  |
|        |   [+ フィールド追加]                            |
|        |                                                 |
+--------+-------------------------------------------------+
```

#### フィールド編集ダイアログ
```
+--------------------------------------------------+
|              フィールド設定                        |
+--------------------------------------------------+
|                                                  |
|  キー *               ラベル *                    |
|  [field_key      ]    [フィールド名        ]      |
|                                                  |
|  ウィジェット種別 *    データ型                    |
|  [selectbox     ▼]    [string           ▼]      |
|                                                  |
|  [✓] 必須  [ ] 一覧表示  [ ] 検索対象            |
|                                                  |
|  ━━ バリデーション ━━━━━━━━━━━━━━━━━━━━━━━━━━━   |
|                                                  |
|  正規表現パターン                                 |
|  [^[A-Z0-9]+$                    ]               |
|                                                  |
|  文字数制限                                       |
|  最小 [5      ]  最大 [20     ] 文字              |
|                                                  |
|  数値範囲制限                                     |
|  最小 [0      ]  最大 [1000000] 文字              |
|                                                  |
|  ━━ その他 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   |
|                                                  |
|  コードグループ (selectbox/tag の場合)            |
|  [CODE_GROUP_1       ▼]                          |
|                                                  |
|  デフォルト値                                     |
|  [_________________________________]             |
|                                                  |
|  ファンクション (動的デフォルト値)                 |
|  [${_now()}                       ]              |
|                                                  |
|                       [キャンセル] [保存]         |
+--------------------------------------------------+
```

---

### 3.6 SCR-CODE: コードマスタ

#### 画面概要
- コードグループ・コード値の管理
- 階層的なコード体系

#### ワイヤーフレーム
```
+----------------------------------------------------------+
|  [Header]                                                |
+--------+-------------------------------------------------+
|        |                                                 |
| [Sidebar] |   🏷️ コードマスタ                             |
|        |                                                 |
|        |   コードグループ              コード値           |
|        |   +-------------------+  +---------------------+ |
|        |   | [+ 新規]          |  | グループ: STATUS    | |
|        |   |-------------------|  |---------------------| |
|        |   | ▶ STATUS         |  | [+ 新規コード]      | |
|        |   | ▶ CATEGORY  ←選択 |  |---------------------| |
|        |   | ▶ PRIORITY       |  | キー   | 値   | 順序 | |
|        |   | ▶ TYPE           |  |--------|------|------| |
|        |   |                   |  | active | 有効 | 1    | |
|        |   |                   |  | inactive| 無効| 2   | |
|        |   |                   |  | deleted| 削除 | 3   | |
|        |   +-------------------+  +---------------------+ |
|        |                                                 |
+--------+-------------------------------------------------+
```

#### コードグループ編集
```
+--------------------------------------------------+
|              コードグループ設定                    |
+--------------------------------------------------+
|                                                  |
|  グループキー *         グループ名 *              |
|  [STATUS           ]    [ステータス         ]     |
|                                                  |
|  説明                                            |
|  [ステータスを表すコード値グループ        ]        |
|                                                  |
|                       [キャンセル] [保存]         |
+--------------------------------------------------+
```

#### コード値編集
```
+--------------------------------------------------+
|              コード値設定                         |
+--------------------------------------------------+
|                                                  |
|  コードキー *           表示値 *                  |
|  [active            ]   [有効              ]      |
|                                                  |
|  表示順序              親コード                   |
|  [1                 ]   [なし            ▼]       |
|                                                  |
|  [✓] 有効                                        |
|                                                  |
|                       [キャンセル] [保存]         |
+--------------------------------------------------+
```

---

## 4. 画面遷移図

```
+-------------+
|  ホーム画面  |
+-------------+
      |
      +---------------------------+---------------------------+
      |                           |                           |
      v                           v                           v
+-------------------+    +-------------------+    +-------------------+
| レコード           |    | モデル             |    | コードマスタ       |
| 一覧               |    | 一覧               |    |                   |
+-------------------+    +-------------------+    +-------------------+
      |                           |                           
      v                           v                           
+-------------------+    +-------------------+    
| レコード           |    | モデル             |    
| 詳細               |    | 詳細               |    
+-------------------+    +-------------------+    
```

### 4.1 遷移イベント一覧

| 遷移元 | トリガー | 遷移先 | パラメータ |
|--------|----------|--------|------------|
| ホーム | マスタカードクリック | レコード一覧 | modelId |
| ホーム | モデル設定クリック | モデル一覧 | - |
| ホーム | コードマスタクリック | コードマスタ | - |
| レコード一覧 | 新規登録クリック | レコード詳細 | modelId, mode=new |
| レコード一覧 | 行クリック | レコード詳細 | modelId, id |
| レコード一覧 | パンくず | ホーム | - |
| レコード詳細 | 保存成功 | レコード一覧 | modelId |
| レコード詳細 | キャンセル | レコード一覧 | modelId |
| モデル一覧 | 新規作成クリック | モデル詳細 | mode=new |
| モデル一覧 | 編集クリック | モデル詳細 | id |
| モデル詳細 | 保存成功 | モデル一覧 | - |
| モデル詳細 | キャンセル | モデル一覧 | - |

---

## 5. レスポンシブ対応

### 5.1 ブレークポイント

| サイズ | 幅 | レイアウト |
|--------|-----|----------|
| Mobile | < 768px | サイドバー非表示（ハンバーガーメニュー） |
| Tablet | 768px - 1024px | サイドバー縮小表示 |
| Desktop | > 1024px | フルレイアウト |

### 5.2 モバイル対応

#### サイドバー
```
[Mobile]
+------------------------------------------+
| [≡]  Mirel Schema           [ユーザー]    |
+------------------------------------------+
|                                          |
|   メインコンテンツ                         |
|   （サイドバーは左からスライドイン）         |
|                                          |
+------------------------------------------+
```

#### テーブル
```
[Mobile - カード形式]
+------------------------------------------+
| +--------------------------------------+ |
| | ID: #0001                            | |
| | 名称: データA                         | |
| | 更新日: 2024/01/15           [詳細 >] | |
| +--------------------------------------+ |
| +--------------------------------------+ |
| | ID: #0002                            | |
| | ...                                  | |
| +--------------------------------------+ |
+------------------------------------------+
```

---

## 6. アクセシビリティ

### 6.1 キーボード操作

| キー | 操作 |
|------|------|
| Tab | フォーカス移動 |
| Shift + Tab | フォーカス逆移動 |
| Enter | ボタン押下、リンク遷移 |
| Space | チェックボックストグル |
| Escape | モーダルクローズ |
| Arrow Keys | ドロップダウン操作 |

### 6.2 ARIA属性

```typescript
// 例: ボタンコンポーネント
<button
  aria-label="新規データを登録する"
  aria-disabled={isLoading}
  role="button"
>
  新規登録
</button>

// 例: エラーメッセージ
<div
  role="alert"
  aria-live="polite"
>
  入力内容にエラーがあります
</div>
```

### 6.3 カラーコントラスト

- テキスト: 4.5:1以上
- 大きなテキスト: 3:1以上
- UI要素: 3:1以上

---

## 7. 状態管理

### 7.1 グローバル状態

```typescript
// Zustand ストア構成
interface AppStore {
  // 認証
  user: User | null;
  isAuthenticated: boolean;
  
  // UI状態
  sidebarOpen: boolean;
  theme: 'light' | 'dark';
  
  // 通知
  notifications: Notification[];
}

// モデルキャッシュ（TanStack Query）
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5分
      gcTime: 30 * 60 * 1000,   // 30分
    },
  },
});
```

### 7.2 フォーム状態

```typescript
// React Hook Form 使用
interface RecordFormState {
  values: Record<string, any>;
  errors: Record<string, string>;
  isDirty: boolean;
  isSubmitting: boolean;
}
```

---

## 更新履歴

| 版 | 日付 | 内容 |
|----|------|------|
| 1.0 | 2024/XX/XX | 初版作成 |
| 2.0 | 2025/11/28 | 名称変更（Flex→Mirel Schema）、バリデーション追加 |
| 3.0 | 2025/11/28 | アプリ切替機能、ロール管理画面追加 |
